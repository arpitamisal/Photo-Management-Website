define("utilities",["exports"],function(a){function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(){Array.prototype.fill||(Array.prototype.fill=function(a){if(null==this)throw new TypeError("this is null or not defined");for(var b=Object(this),c=b.length>>>0,d=arguments[1],e=d>>0,f=e<0?Math.max(c+e,0):Math.min(e,c),g=arguments[2],h=void 0===g?c:g>>0,i=h<0?Math.max(c+h,0):Math.min(h,c);f<i;)b[f]=a,f++;return b})}function d(){Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function a(){var b=isNaN(arguments[0])?1:Number(arguments[0]);return b?Array.prototype.reduce.call(this,function(c,d){return Array.isArray(d)?c.push.apply(c,a.call(d,b-1)):c.push(d),c},[]):Array.prototype.slice.call(this)},writable:!0})}function e(){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(a,b){function c(a,b){return a===b||"number"==typeof a&&"number"==typeof b&&isNaN(a)&&isNaN(b)}if(null==this)throw new TypeError('"this" is null or not defined');var d=Object(this),e=d.length>>>0;if(0===e)return!1;for(var f=0|b,g=Math.max(f>=0?f:e-Math.abs(f),0);g<e;){if(c(d[g],a))return!0;g++}return!1}})}function f(){Math.trunc=Math.trunc||function(a){return isNaN(a)?NaN:a>0?Math.floor(a):Math.ceil(a)}}function g(){Number.isInteger=Number.isInteger||function(a){return"number"==typeof a&&isFinite(a)&&Math.floor(a)===a}}function h(){String.prototype.includes||(String.prototype.includes=function(a,b){"use strict";return"number"!=typeof b&&(b=0),!(b+a.length>this.length)&&-1!==this.indexOf(a,b)})}function i(){String.prototype.repeat||(String.prototype.repeat=function(a){"use strict";if(null==this)throw new TypeError("can't convert "+this+" to object");var b=""+this;if(a=+a,a!=a&&(a=0),a<0)throw new RangeError("repeat count must be non-negative");if(a==1/0)throw new RangeError("repeat count must be less than infinity");if(a=Math.floor(a),0==b.length||0==a)return"";if(b.length*a>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var c="";1==(1&a)&&(c+=b),0!=(a>>>=1);)b+=b;return c})}var j={},k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),m=function(){function a(c){b(this,a),this.array=c,this.index=0}return l(a,[{key:"getValue",value:function(){return this.index=(this.index+1)%this.array.length,this.array[this.index]}}]),a}(),n=function(){function a(c,d){b(this,a),this._questionFactory=c,this._maxQuestionsCached=d,this._alreadyMadeQuestions=[]}return l(a,[{key:"makeQuestion",value:function(a){var b=20,c=0,d=null,e=null;this._alreadyMadeQuestions.length&&this._alreadyMadeQuestions[0].levelIndex!==a&&(this._alreadyMadeQuestions.length=0);do{d=this._questionFactory.make(a),e=JSON.stringify(d),c++}while(this._cacheHit(e)&&c<b);if(c===b){var f=this._alreadyMadeQuestions.shift();d=f.raw,e=f.asString}return this._alreadyMadeQuestions.push({asString:e,levelIndex:a,raw:d}),this._alreadyMadeQuestions.length>this._maxQuestionsCached&&this._alreadyMadeQuestions.shift(),d}},{key:"_cacheHit",value:function(a){var b=this._alreadyMadeQuestions.find(function(b){return b.asString===a});return Boolean(b)}}]),a}(),o=function(){function a(c,d,e){var f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};b(this,a),this.userAnswer=c,this.expectedAnswer=d,this.isCorrect=e,this.moreData=f,this.userAnswerHTML="",this.expectedAnswerHTML="",this.hintMessage="",this.showSpecialCharacterLegend=!1}return l(a,[{key:"buildOutputDifference",value:function(a){var b=this;return new Promise(function(c){a.buildStringDifferenceObject(b.expectedAnswer,b.userAnswer).then(function(a){b.userAnswerHTML=a.userAnswerHTML,b.expectedAnswerHTML=a.expectedAnswerHTML,b.hintMessage=a.hintMessage,b.showSpecialCharacterLegend=a.isReplacementADifference||a.isWhitespaceADifference,c()})})}}]),a}(),p=function(){function a(c){b(this,a),this.parentResource=c,this.beenLongEnough=!0,this.backlog=[]}return l(a,[{key:"record",value:function(a){var b=this;if(this.backlog.push(a),this.beenLongEnough){this.beenLongEnough=!1;window.setTimeout(function(){b.beenLongEnough=!0,b.parentResource.postEvent({part:0,complete:!0,answer:"",metadata:{interactions:JSON.stringify(b.backlog)}}),b.backlog.length=0},1e4)}}}]),a}();Handlebars.registerHelper("range",function(a,b){for(var c="",d=0;d<a;++d)c+=b.fn(d);return c}),String.prototype.startsWith=function(a){return 0===this.indexOf(a)},String.prototype.replaceAt=function(a,b){return this.substr(0,a)+b+this.substr(a+1)},String.prototype.rightReplace=function(a,b){var c=this.slice();if(0!==c.length)for(;c[c.length-1]===a;){for(var d=c.length-1;d>=0&&c[d]===a;--d);c=c.replaceAt(d+1,b)}return c},c(),d(),e(),i(),g(),h(),f();var q=function(){function a(){b(this,a),this.zyanteGray="#333333",this.zyanteExpiredGray="#666666",this.zyanteLightGray="#CCCCCC",this.zyanteTableGray="#D8D8D8",this.zyanteFeaturedBackgroundColor="#EFEFEF",this.zyanteGreen="#738033",this.zyanteDarkBlue="#5780A6",this.zyanteLightBlue="#6685A8",this.zyanteLighterBlue="#87ADD2",this.zyanteMediumRed="#BB0404",this.zyanteOrange="#C60",this.zyAnimatorBlack=this.zyanteGray,this.zyAnimatorGray="#AFAFAF",this.zyAnimatorWhite="#FFFFFF",this.zyAnimatorGreen="#1EC81E",this.zyAnimatorRed="#DC0404",this.zyAnimatorBlue="#5780DC",this.zyAnimatorLightBlue="#B0D6FB",this.zyAnimatorOrange="#E68142",this.zyAnimatorLightOrange="#F9D8BC",this.zyAnimatorYellow="#FFD364",this.zyAnimatorPurple="rgb(132, 36, 172)",this.zyAnimatorBrown="#886441",this.multiplicationSymbol="&middot;",this.subtractionSymbol="&#8211;",this.TAB_KEY=9,this.ENTER_KEY=13,this.ARROW_LEFT=37,this.ARROW_UP=38,this.ARROW_RIGHT=39,this.ARROW_DOWN=40,this.DELETE_KEY=46,this.B_KEY=66,this.I_KEY=73,this.U_KEY=85,this.cppReservedWords=["alignas","alignof","and","and_eq","asm","auto","bitand","bitor","bool","break","case","catch","char","char16_t","char32_t","class","compl","const","constexpr","const_cast","continue","decltype","default","delete","do","double","dynamic_cast","else","enum","explicit","export","extern","false","float","for","friend","goto","if","inline","int","long","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","private","protected","public","register","reinterpret_cast","return","short","signed","sizeof","static","static_assert","static_cast","struct","switch","template","this","thread_local","throw","true","try","typedef","typeid","typename","union","unsigned","using","virtual","void","volatile","wchar_t","while","xor","xor_eq"]}return l(a,[{key:"replaceSmartQuotes",value:function(a){return a?a.replace(/[“”]+/g,'"').replace(/[‘’]+/g,"'"):""}},{key:"zyDEServer",value:function(a,b,c,d,e){var f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,g=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,h=arguments.length>7&&void 0!==arguments[7]&&arguments[7],i={host:"https://zydelith.zybooks.com",forwardCookies:!1},j={host:"https://zyde.zybooks.com",forwardCookies:!1},k={host:"https://marketing-zyde.zybooks.com",forwardCookies:!1},l=h?[k,j]:[i,j];return new Promise(function(){!function h(){if(0===l.length)e();else{var i=l.shift();$.ajax(i.host+"/"+b,{type:a,data:c,timeout:f,dataType:g,success:d,xhrFields:{withCredentials:i.forwardCookies}}).fail(function(){h()})}}()})}},{key:"addIfConditionalHandlebars",value:function(){Handlebars.registerHelper("ifCond",function(a,b,c,d){var e=!1;switch(b){case"===":e=a===c;break;case"!==":e=a!==c;break;case"||":e=a||c;break;case"&&":e=a&&c;break;case">":e=a>c;break;case"<":e=a<c;break;case">=":e=a>=c;break;case"<=":e=a<=c;break;default:e=!1}return e?d.fn():d.inverse()})}},{key:"removeWhitespace",value:function(a){return a.replace(/\s/g,"")}},{key:"twoArraysMatch",value:function(a,b){return a.length===b.length&&a.every(function(a,c){return a===b[c]})}},{key:"getNewline",value:function(){return"<div></div>"}},{key:"aceBaseSettings",value:function(a,b){ace.define("ace/theme/autumn",["require","exports","module","ace/lib/dom"],function(a,b){b.isDark=!1,b.cssClass="ace-autumn"}),a.setTheme("ace/theme/autumn"),a.setBehavioursEnabled(!1),a.setHighlightSelectedWord(!1),a.setShowInvisibles(!1),a.setShowPrintMargin(!1),a.setShowFoldWidgets(!1),a.setOptions({dragEnabled:!1,enableMultiselect:!1,fontSize:14}),a.commands.removeCommand("find"),a.commands.removeCommand("showSettingsMenu"),a.getSession().setUseSoftTabs(!0);var c="ace/mode/text",d=3;switch(b){case"c":case"cpp":c="ace/mode/c_cpp";break;case"java":c="ace/mode/java";break;case"matlab":c="ace/mode/matlab";break;case"python":case"python2":case"python3":c="ace/mode/python",d=4;break;case"sql":c="ace/mode/sql";break;case"html":c="ace/mode/html",a.getSession().setUseWorker(!1);break;case"javascript":case"js":c="ace/mode/javascript",this.disableSomeLinterRules(a);break;case"css":c="ace/mode/css",a.getSession().setUseWorker(!1);break;case"MIPS":case"MIPSzy":c="ace/mode/assembly_x86";break;case"ARM":case"RISCV":case"zyFlowchart":case"coral":break;default:throw new Error("language not specified")}a.getSession().setMode(c),a.getSession().setTabSize(d),a.$blockScrolling=1/0}},{key:"disableSomeLinterRules",value:function(a){var b=a.session;b.on("changeMode",function(){b.$worker&&b.$worker.send("setOptions",[{esversion:8,"-W083":!1}])})}},{key:"submitOnCtrlReturn",value:function(a,b){a.commands.addCommand({name:"submitprogram",bindKey:{win:"Ctrl-Return",max:"Command-Return"},exec:b})}},{key:"disableButton",value:function(a){a.attr("disabled",!0),a.addClass("disabled")}},{key:"enableButton",value:function(a){a.removeAttr("disabled"),a.removeClass("disabled")}},{key:"pickNumberInRange",value:function(a,b,c){var d=c||[],e=null;do{e=Math.floor(Math.random()*(b-a+1))+a}while(-1!==d.indexOf(e));return e}},{key:"pickNNumbersInRange",value:function(a,b,c){for(var d=[];d.length<c;){var e=this.pickNumberInRange(a,b,d);d.push(e)}return d}},{key:"flipCoin",value:function(){return 0===this.pickNumberInRange(0,1)}},{key:"createArrayOfSizeN",value:function(a){return Array(a).fill(0)}},{key:"shuffleArray",value:function(a){for(var b=a.length;b>0;){var c=Math.floor(Math.random()*b);b--;var d=a[b];a[b]=a[c],a[c]=d}}},{key:"rgbToHex",value:function(a){function b(a){var b=10,c=16,d=-2,e=parseInt(a,b),f=e.toString(c).slice(d);return e<c?"0"+f:f}return"#"+a.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/).slice(1,4).map(function(a){return""+b(a)}).join("")}},{key:"pickElementFromArray",value:function(a){return a[Math.floor(Math.random()*a.length)]}},{key:"pickNElementsFromArray",value:function(a,b){var c=jQuery.extend([],a);return this.shuffleArray(c),c.filter(function(a,c){return c<b})}},{key:"pickNIndicesFromArray",value:function(a,b){var c=a.map(function(a,b){return b});return this.pickNElementsFromArray(c,b)}},{key:"escapeHTML",value:function(a){return $("<div>").text(a).html()}},{key:"unescapeHTML",value:function(a){return $("<div>").html(a).text()}},{key:"stringifyConstantValue",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=a;if(b&&!c)1===d?d="":-1===d&&(d="-");else if(!b){var e="";d>=0?e=" + ":(e=" "+this.subtractionSymbol+" ",d*=-1),d=1!==d||c?e+d:e}return d}},{key:"getCheckmarkImageURL",value:function(a){return a.getResourceURL("checkmark.png","utilities")}},{key:"getCarousel",value:function(a){return this.shuffleArray(a),new m(a)}},{key:"initialCapitalize",value:function(a){return a.charAt(0).toUpperCase()+a.slice(1)}},{key:"getTestResult",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return new(Function.prototype.bind.apply(o,[null].concat(b)))}},{key:"getQuestionCache",value:function(a,b){return new n(a,b)}},{key:"makeQuestionFromCacheOrLocalStore",value:function(a){var b=a.isExam,c=a.questionCache,d=a.id,e=a.levelIndex,f=a.parentResource,g=a.makeQuestionFromJSON,h=c.makeQuestion(e);if(b){var i="question-"+d+"-"+e,j=f.getLocalStore(i);j?h=g(j):f.setLocalStore(i,h)}return h}},{key:"envelopLatex",value:function(a){return"\\( "+a+" \\)"}},{key:"makeLatexFraction",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{small:!1,large:!1},d="\\frac{"+a+"}{"+b+"}";(c.small||c.large)&&(d="\\"+(c.small?"small":"large")+"{"+d+"}");return d}},{key:"manageDiffHighlighting",value:function(a,b,c){var d=a.stringDifference(b,c),e=a.makeStringDiffHTML(b,d.expectedAnswerIndicies).string,f=a.makeStringDiffHTML(c,d.userAnswerIndicies).string,g=/(<span class="string-diff-highlight)(">\t<\/span>)/g;e=e.replace(g,"$1 tab$2"),f=f.replace(g,"$1 tab$2");var h=d.expectedAnswerIndicies.map(function(a){return b[a]}),i=h.concat(d.userAnswerIndicies.map(function(a){return c[a]})),j=i.length>0&&i.every(function(a){return/^\s*$/.test(a)}),k=h.some(function(a){return/^\n$/.test(a)});return{doesOnlyWhitespaceDiffer:j,expectedOutputDiffIndices:d.expectedAnswerIndicies,highlightedExpectedOutput:e,highlightedActualOutput:f,wasNewlineExpectedButMissing:k}}},{key:"getParameterCombination",value:function(a){var b=this,c=void 0===a?"undefined":k(a);switch(null===a?c="undefined":$.isArray(a)&&(c="array"),c){case"undefined":return"";case"string":return this.unescapeHTML(a);case"number":case"boolean":return a;case"array":var d=this.pickElementFromArray(a);return this.getParameterCombination(d);case"object":var e={};return Object.keys(a).forEach(function(c){e[c]=b.getParameterCombination(a[c])}),e;default:throw new Error("Found unexpected data type: "+c)}}},{key:"getNumberOfPermutations",value:function(a){var b=this;if($.isArray(a)){return function(a){return a.reduce(function(a,b){return a+b},0)}(a.map(function(a){return b.getNumberOfPermutations(a)}))}if(null!==a&&"object"===(void 0===a?"undefined":k(a))){return function(a){return a.reduce(function(a,b){return a*b},1)}(Object.values(a).map(function(a){return b.getNumberOfPermutations(a)}))}return 1}},{key:"makePythonModule",value:function(a){Sk.configure({read:function(a){if(!Sk.builtinFiles||!Sk.builtinFiles.files[a])throw new Error("File not found: '"+a+"'");return Sk.builtinFiles.files[a]}});var b="import random",c="from common_functions import pick_from, pick_from_range",d=b+"\n"+c+"\n"+a;return Sk.configure({execLimit:5e3}),Sk.importMainWithBody("<stdin>",!1,d)}},{key:"makePythonModuleWithErrorCheck",value:function(a){try{return this.makePythonModule(a)}catch(a){var b=this.reviseLineNumberInErrorMessage(a.toString());alert(b)}return null}},{key:"getPythonNotation",value:function(a){var b=/^((\$\{\w+\})|(\w+))$/,c=b.exec(a);if(c){if(c[2])return c[2];if(c[3])return"${"+c[3]+"}"}return a}},{key:"replaceStringVariables",value:function(a,b){var c=a.replace(/\$\{(\w+)\}/g,function(a,c){var d=b.tp$getattr(c),e=a;if(d){e=("SigNumber"===d.tp$name?Sk.abstr.gattr(d,"string"):d).v}return e});return c=c.replace(/\$\{(\w+)((\[\d+\])+)\}/g,function(a,c,d){var e=b.tp$getattr(c),f=a;if(e){var g=d.substring(1,d.length-1).split("][").map(function(a){return parseInt(a,10)}),h=e;g.forEach(function(a){h&&(h=h.v[a])}),h&&(f=h.v)}return f})}},{key:"reviseLineNumberInErrorMessage",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return a.replace(/\son\sline\s(\d+)/g,function(a,c){var d=parseInt(c,10),e=d-b;return d>0?" on line "+e+" of progression's code":""})}},{key:"generateGUID",value:function(){var a=(new Date).getTime(),b=16;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var d=(a+Math.random()*b)%b|0;return a=Math.floor(a/b),("x"===c?d:3&d|8).toString(b)})}},{key:"getRunCodeFormDataObject",value:function(a,b,c,d,e){var f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],g="python3"===b?"python":b,h=e.filter(function(a){return a.name.endsWith("."+b)||a.name.endsWith("."+b+".student")}).map(function(a){return a.name.replace(".student","")});h.includes(c)||h.push(c);var i=h.join(" "),j={cpp:"g++ "+i+" -o a.out",c:"gcc "+i+" -o a.out -lm",java:"javac "+i},k={cpp:"./a.out",c:"./a.out",java:"java "+c.slice(0,c.lastIndexOf(".")),python:"python2 "+c,python3:"python3 "+c},l={language:g,compile_command:j[b],output_files:f};switch(a){case"explore":l.command=k[b],l.input=d;break;case"coding_progression":l.run_command=k[b],l.inputs=d,e.some(function(a){return a.name.includes(".solution")})&&(l.get_solution_too=!0);break;default:throw new Error("SDK '"+a+"' not supported")}var m=new FormData;return m.append("config",JSON.stringify(l)),e.forEach(function(a){m.append(a.name,a)}),m}},{key:"getSQLConfigFormDataObject",value:function(a){var b={name:"SQL",symbol:"sql",language:"sql",compile:{command:"",args:""},command:"mysql < "+a.name,command_args:"-X"},c=new FormData;return c.append("config",JSON.stringify(b)),c.append(a.name,a),c}},{key:"makeTinkerRecorder",value:function(a){return new p(a)}},{key:"exportBuilderXML",value:function(a,b,c){b.val(a).select(),navigator.clipboard.writeText(a).then(function(){return c.fadeIn({complete:function(){setTimeout(function(){c.fadeOut()},3e3)}})})}}]),a}();j.exports=new q,a.default=j.exports});