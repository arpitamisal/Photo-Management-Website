define("zyFlowchartSDK",["exports"],function(a){function b(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function d(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,e=b.getHorizontalCenter(),f=b.getBottom(),g=a.getBBox();a.attr({x:e+g.width/2+c,y:f+g.height/2+d})}function g(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,d=b.getVerticalCenter(),e=a.getBBox(),f=b.getRight();a.attr({x:f+e.width/2-2,y:d-c})}function h(a){return"IntegerVariable"===a.getClassName()||"MemoryCell"===a.getClassName()&&"integer"===a.type}function i(a,b){var c=new Hb(mc);return h(a)&&h(b)&&(c=new Jb(mc)),c}function j(a,b){var c=b.arrayOfVariables,d=null,e=null,f=null;switch(-1===["and","or"].indexOf(a.operator)&&(e=l(a.children[0],b),f=l(a.children[1],b)),a.operator){case"+":d=i(e,f),d.setValueDuringExecution(e.getValue(c)+f.getValue(c));break;case"-":d=i(e,f),d.setValueDuringExecution(e.getValue(c)-f.getValue(c));break;case"*":d=i(e,f),d.setValueDuringExecution(e.getValue(c)*f.getValue(c));break;case"/":if(d=i(e,f),"IntegerVariable"===d.getClassName()&&0===f.getValue())throw new Error("Cannot divide by zero with integer division");d.setValueDuringExecution(e.getValue(c)/f.getValue(c));break;case"%":d=i(e,f),d.setValueDuringExecution(e.getValue(c)%f.getValue(c));break;case">":d=new Fb(mc),d.setValueDuringExecution(e.getValue(c)>f.getValue(c));break;case"<":d=new Fb(mc),d.setValueDuringExecution(e.getValue(c)<f.getValue(c));break;case">=":d=new Fb(mc),d.setValueDuringExecution(e.getValue(c)>=f.getValue(c));break;case"<=":d=new Fb(mc),d.setValueDuringExecution(e.getValue(c)<=f.getValue(c));break;case"==":d=new Fb(mc),d.setValueDuringExecution(e.getValue(c)===f.getValue(c));break;case"!=":d=new Fb(mc),d.setValueDuringExecution(e.getValue(c)!==f.getValue(c));break;case"and":d=new Fb(mc),d.setValueDuringExecution(l(a.children[0],b).getValue(c)&&l(a.children[1],b).getValue(c));break;case"or":d=new Fb(mc),d.setValueDuringExecution(l(a.children[0],b).getValue(c)||l(a.children[1],b).getValue(c));break;default:throw new Error("Unrecognized binary operator "+a.operator)}return d}function k(a,b,c){var d=b.clone();switch(d.name=mc,a){case"+":break;case"-":d.setValueDuringExecution(-b.getValue(c));break;case"not":d.setValueDuringExecution(!b.getValue(c));break;default:throw new Error("Unrecognized unary operator "+a)}return d}function l(a,b){var c=null;switch(a.getClassName()){case"VariableSymbol":c=a.variable;break;case"MemoryCellSymbol":c=a.memoryCell;break;case"FunctionCallSymbol":var d=a.children.map(function(a){return l(a,b)});a.function.parameters.forEach(function(a,c){var e=d[c];a.setValueDuringExecution(e.getValue(b.arrayOfVariables))}),a.function.execute(b),a.function.return.length&&(c=a.function.return[0].clone(),c.name=mc);break;case"BinaryOperatorSymbol":c=j(a,b);break;case"UnaryOperatorSymbol":var e=l(a.children[0],b);c=k(a.operator,e,b.arrayOfVariables);break;case"SubscriptOperatorSymbol":var f=a.children[0].variable,g=l(a.children[1],b).getValue(b.arrayOfVariables),h=f.arrayCells.length-1;if(h<0)throw new Error("Set the array's size before accessing an element.");var i="";if(g<0?i="small":g>h&&(i="large"),i)throw new Error("An array index of "+g+" is too "+i+"; valid range of "+f.name+": 0 - "+h);c=v(f.name+"["+g+"]",b.arrayOfVariables);break;default:throw new Error("Unsupported tree symbol. Please report this error to a developer.")}return c}function m(a){var b=[],c=new Kb("Variables");c.push(new Jb("x"),new Jb("y"),new Hb("average")),b.push(c);var d=new Kb("Variables");d.push(new Ib("userWeights",3),new Jb("x"),new Jb("y"),new Hb("average")),b.push(d);var e=new Kb("Variables");e.push(new Ib("userWeights",0),new Gb("userPercents","?")),b.push(e),b.forEach(function(b){$("#"+a).append("<div></div>"),new V(b,$("#"+a+" div:last")).render()})}function n(a){var b=new Pa;['if 1==1\n   Put "a" to output\nelse\n   while 2==2\n      Put "b" to output\n      while 3==3\n         Put "c" to output\n         Put "d" to output','if 1==1\n   Put "a" to output\nelse\n   while 2==2\n      Put "b" to output\n      Put "c" to output','if 1==1\n   Put "a" to output\nelse\n   while 2==2\n      Put "b" to output\n      if 3==3\n         Put "c" to output','while 1<1\n   if 2<2\n      Put "a" to output\nPut "b" to output','while 1 < 1\n   if 2 < 2\n      if 3 < 3\n         Put "a" to output',"integer x\ninteger y\nif x < 1\n   x = 0\nelseif x > 1\n   x = 2\n   y = 3\nelse\n   while y > 3\n      x = 1",'if 1==1\n   Put "a" to output\nelse\n   if 2==2\n      Put "b" to output\n   Put "c" to output','integer x\nif x < 1\n   Put "a" to output\nelseif x > 1\n   Put "b" to output','if 1==1\n   Put "a" to output\nif 2==2\n   Put "b" to output',"integer x\ninteger y\nwhile x > 1\n   if y > 4\n      x = x + 1\n   else\n      x = x + 2","integer x\nif x > 1\n   while x > 2\n      x = x + 1\nelse\n   while x > 3\n      x = x + 1",'integer x\nif x > 1\n   if x > 2\n      Put "a" to output\n   else\n      Put "b" to output\nelse\n   if x < 3\n      Put "c" to output\n   else\n      Put "d" to output','if 1 > 1\n   if 2 > 2\n      Put "a" to output\n   else\n      while 3 > 3\n         Put "b" to output',"integer x\ninteger y\nif x > 5\n   y = 1\nelse\n   y = 2",'integer x\nif x > 5\n   Put "a" to output\nelse\n   Put "b" to output','integer x\ninteger y\nwhile x < 5\n   while y < 4\n      Put "a" to output',"integer x\nwhile x < 5\n   x = x + 1",'integer x\nPut "a" to output\nx = Get next input\nPut x to output',"integer x\ninteger a\ninteger y\ninteger z\nx = 5\na = 4 + (y * y) + (x * x) + (z * z)","Put 5 to output with 3 decimal places"].forEach(function(c){$("#"+a).append("<div></div>");var d=b.parse(c);new L(d.functions[0].flowchart,$("#"+a+" div:last")).render()})}function o(a,b){if(0===a.length)return b.length;if(0===b.length)return a.length;for(var c=[],d=0;d<=b.length;d++)c[d]=[d];for(var e=0;e<=a.length;e++)c[0][e]=e;for(var f=1,g=1,h=1,i=1;i<=b.length;i++)for(var j=1;j<=a.length;j++)b.charAt(i-1)===a.charAt(j-1)?c[i][j]=c[i-1][j-1]:c[i][j]=Math.min(c[i-1][j-1]+f,Math.min(c[i][j-1]+g,c[i-1][j]+h));return c[c.length-1][c[0].length-1]}function p(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c="";if(a.length){var d=a.map(function(a){return"'"+a+"'"});c=""+d.join(", ")+(d.length>1?",":"")+" or something different"}return(c?"Maybe you meant "+c+"?":"")+(b&&1===a.length&&a[0].toUpperCase()===b.toUpperCase()?"\nNote: Capitalization matters":"")}function q(a,c,d){var e=c.map(function(b){return o(a,b)}),f=Math.min.apply(Math,b(e)),g=Math.min(5,Math.floor(a.length/2)),h=new Set;if(f>0&&f<=g){e.reduce(function(a,b,c){var d=a;return b===f&&(d=a.concat(c)),d},[]).map(function(a){return c[a]}).forEach(function(a){return h.add(a)})}return a in d&&h.add(d[a]),p(Array.from(h).sort(),a)}function r(a,b,c){var d=b[0].concat(b[1]).concat(b[2]).map(function(a){return a.name}),e=c.map(function(a){return a.name});return q(a,nc.concat(e).concat(d),qc)}function s(a){return q(a,["integer","float","integer array","float array"],pc)}function t(a){return!(nc||[]).includes(a)&&/^[a-z,A-Z]\w*$/.test(a)}function u(a){return nc.includes(a)}function v(a,b){return b.map(function(b){return b.getMemoryCell(a)}).find(function(a){return a})}function w(a,b){a.children.forEach(function(a){return w(a,b)}),"FunctionCallSymbol"!==a.getClassName()||a.function.isBuiltIn()||b.push(a)}function x(a,b){var c=!0;return a!==b&&(c=b.children.some(function(b){return x(a,b)})),c}function y(){return Math.ceil(1e15*Math.random())}function z(a,b){var c=!1;return a&&(c=!("FunctionCallSymbol"!==a.getClassName()||!b.includes(a.function.name))||a.children.some(function(a){return z(a,b)})),c}function A(a,b){var c=z(a.expression&&a.expression.root,b);return"AssignmentNode"===a.getName()&&(c=c||z(a.assignedTree&&a.assignedTree.root,b)),c}function B(a){return a.tokens[0].value.trim()}function C(a){var b=a%10,c="th";if([1,2,3].includes(b)&&![11,12,13].includes(a)){c=["st","nd","rd"][b-1]}return""+a+c}function D(a){var c=a.codeOverride,d=void 0===c?null:c,e=a.connectionsEnding,f=a.node,g=a.nodeToNumber,h=g.get(f),i=f.commentLines.length>1,j=f.commentLines.map(B).map(function(a,b){return"Node "+h+"'s "+(i?C(b+1)+" ":"")+"comment: "+a}),k=d||"Node "+h+"'s code: "+f.line.line.trim(),l="Node "+h+" points to node"+e+".";return[].concat(b(j),[k,l]).join("\n")}var E={},F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},G=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},H=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),I=function(){function a(b){e(this,a),this.$containerDOM=b,this.isInExecuteMode=!1}return H(a,[{key:"render",value:function(){throw new Error("FunctionCodeController's render function should be overridden")}},{key:"showNextToExecuteNode",value:function(a){throw new Error("FunctionCodeController's showNextToExecuteNode function should be overridden")}},{key:"focus",value:function(){}},{key:"setError",value:function(a,b){}},{key:"clearError",value:function(){}},{key:"setIsInExecuteMode",value:function(a){this.isInExecuteMode=a}}]),a}(),J=function(a){function b(a){e(this,b);var d=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,null));return d.programCode=a,d.editor=null,d.hasRendered=!1,d.needsAccessibleAndInteractive=!1,d.$textarea=null,d}return d(b,a),H(b,[{key:"setContainerDOM",value:function(a){this.$containerDOM=a}},{key:"setNeedsAccessibleAndInteractive",value:function(a){this.needsAccessibleAndInteractive=a}},{key:"disable",value:function(){if(this.editor){$(this.editor.renderer.$cursorLayer.element).hide(),this.$containerDOM.addClass("disabled"),this.editor.setOptions({readOnly:!0,highlightActiveLine:!1,highlightGutterLine:!1}),this.editor.blur()}else this.$textarea&&this.$textarea.prop("disabled",!0)}},{key:"forceEditorReRender",value:function(){this.needsAccessibleAndInteractive||this.editor.resize()}},{key:"removeLineNumberHighlighter",value:function(){this.needsAccessibleAndInteractive||this.editor.session.clearBreakpoints()}},{key:"ensureLineNumberInView",value:function(a){if(!this.needsAccessibleAndInteractive){var b=a-1,c=1,d=b>=this.editor.getFirstVisibleRow()+c,e=2,f=b<=this.editor.getLastVisibleRow()-e;d&&f||this.editor.scrollToLine(a,!0)}}},{key:"focus",value:function(){this.needsAccessibleAndInteractive?this.$textarea.focus():this.editor.focus()}},{key:"detach",value:function(){if(this.hasRendered)if(this.needsAccessibleAndInteractive)this.$textarea.detach();else{var a=$(this.editor.container);a.detach()}}}]),b}(I),K=function(){function a(b,c){e(this,a),this.executor=b,this.$containerDOM=c,this.functionControllers=[],this.pseudocodeController=null,this.portedCodeController=null,this.$functionContainers=null,this.isInExecuteMode=!1,this.lastFunctionOnStack=null,this.currentlyShownFunctionIndex=0,this.isCompact=!1,this.maxHeight=null,this.maxWidth=null,this.showFunctionName=!0,this.isOutputEditable=!1,this.isInputEditable=!0,this.outputChangeFunction=null,this.segmentedFunctionControl=null,this.segmentedLanguageControl=null,this.selectedSegmentedControlIndex=0,this.segmentedControlLanguages=[],this.isSegmentedFunctionControlEnabled=!0,this.isSegmentedLanguageControlEnabled=!0,this.languagesToShow="flowchart",this.isPseudocodeEditable=!1,this.isPseudocodeCurrentlyEditable=!1,this.isPseudocodeEditingRestricted=!1,this.restrictedCode=null,this.errorMessage=null,this.errorLineNumber=null,this.previousNodeExecuted=null,this.compilationErrorCallback=null,this.portLanguage=null,this.needsAccessibleAndInteractive=!1}return H(a,[{key:"render",value:function(){var a=this;this.executor.input&&this.executor.input.clearRegisteredControllers(),this.executor.output&&this.executor.output.clearRegisteredControllers(),this.pseudocodeController&&this.pseudocodeController.detach(),this.portedCodeController&&this.portedCodeController.detach();var b=this.functionControllers.map(function(a){return a.makeFunctionAndCodeScrollAmount()}),c="segmented-function-control-"+y(),d="segmented-language-control-"+y(),e=this.makeFunctionsToRender(),f=this.segmentedControlLanguages.length>1;this.$containerDOM.html(lc.templates.executor({errorMessage:this.errorMessage,functions:e,isUsingMultipleLanguages:f,segmentedFunctionControlId:c,segmentedLanguageControlId:d})),this.$functionContainers=this.$containerDOM.find(".function-container"),this.functionControllers=e.map(function(b,c){return new O(b,a.executor.code,a.$functionContainers.eq(c),a.executor.input,a.executor.output)}),this.functionControllers.forEach(function(b){b.setIsPseudocodeCurrentlyShown(a.isPseudocodeCurrentlyShown(),a.pseudocodeController),b.setIsPortedCodeCurrentlyShown(a.isPortedCodeCurrentlyShown(),a.portedCodeController),b.setIsPseudocodeEditable(a.isPseudocodeCurrentlyEditable),b.setIsPseudocodeEditingRestricted(a.isPseudocodeEditingRestricted,a.restrictedCode),b.setShowFunctionName(a.showFunctionName),b.setIsOutputEditable(a.isOutputEditable,a.outputChangeFunction),b.setIsInputEditable(a.isInputEditable),b.setIsInExecuteMode(a.isInExecuteMode),b.setNeedsAccessibleAndInteractive(a.needsAccessibleAndInteractive),b.render(),a.errorMessage?b.setError(a.errorMessage,a.errorLineNumber):b.clearError()}),this.isCompact?this.renderCompactMode(f,c,d,b):this.$functionContainers.each(function(a,b){$(b).find(".function-container").height("auto").width("auto")});var g=this.$containerDOM.find(".error-message");if(g.length){var h=function(a){return Number(a.split("px")[0])},i=this.$containerDOM.find(".flowchart-program"),j=i.innerWidth(),k=h(g.css("paddingLeft"))+h(g.css("paddingRight")),l=j-k;g.css("max-width",l)}this.updateShownFunction()}},{key:"renderCompactMode",value:function(a,c,d,e){var f=this,g=0;!this.isCodeCurrentlyShown()&&this.executor.program.functions.length>1&&(this.renderFunctionSegmentedController(c),g+=$("#"+c).outerHeight(!0)),a&&(this.renderLanguageSegmentedController(d),g+=$("#"+d).outerHeight(!0)),this.functionControllers.forEach(function(a){return a.hideFunctionCode()});var h=this.$containerDOM.find(".flowchart-program"),i=h.outerWidth(!0)-h.width(),j=Math.max.apply(Math,b(this.functionControllers.map(function(a){return a.getVariableWidth()}))),k=275,l=Math.max(j,k);this.functionControllers.forEach(function(a){return a.setVariableAndIOWidth(l)});var m=Math.max.apply(Math,b(this.functionControllers.map(function(a){return a.getVariableAndIOHeight()})));this.functionControllers.forEach(function(a){return a.setVariableAndIOHeight(m)});var n=this.functionControllers[0].$containerDOM.find(".variables-and-IO-container").outerWidth(!0),o=this.maxWidth-n-i,p=500;if(this.isCodeCurrentlyShown()){var q=Math.min(p,o);this.$functionContainers.each(function(a,b){$(b).find(".function-container").width(q).height(m)}),this.functionControllers.forEach(function(a){a.showFunctionCode(),a.codeController.forceEditorReRender()})}else{this.functionControllers.forEach(function(a){return a.showFunctionCode()});var r=this.functionControllers.map(function(a){return a.getFunctionCodeHeight()}),s=this.functionControllers.map(function(a){return a.getFunctionCodeWidth()}),t=1,u=Math.max.apply(Math,b(r))+t,v=Math.max.apply(Math,b(s))+t,w=Math.min(v,o);"both"===this.languagesToShow&&(w=Math.max(w,p));var x=this.maxHeight-g,y=Math.min(x,u);this.$functionContainers.each(function(a,b){var c=r[a]<y?"center":"stretch",d=s[a]<w?"center":"flex-start";$(b).find(".function-container").height(y).width(w).css("align-items",c).css("justify-content",d)})}this.functionControllers.forEach(function(a){var b=e.find(function(b){return b.programFunction===a.programFunction});b&&a.setFunctionCodeScrollAmount(b)});var z=this.getTopOfStack(),A=z&&z.node||null;this.functionControllers.forEach(function(a){return a.showNextToExecuteNode(A,f.previousNodeExecuted)})}},{key:"makeFunctionsToRender",value:function(){var a=[];if(this.isCodeCurrentlyShown()){var c=null;if(this.isInExecuteMode)c=this.executor.stack.length?this.getTopOfStack().function:this.lastFunctionOnStack;else{c=(new Pa).parse("").functions[0]}a.push(c)}else if(this.isInExecuteMode){var d={};this.executor.stack.length?this.executor.stack.forEach(function(a){d[a.function.name]=a.function}):d[this.lastFunctionOnStack.name]=this.lastFunctionOnStack,a.push.apply(a,b(this.executor.program.functions.map(function(a){var b=a;return a.name in d&&(b=d[a.name]),b})))}else a.push.apply(a,b(this.executor.program.functions));return a}},{key:"renderFunctionSegmentedController",value:function(a){var b=this,c=this.executor.program.functions.map(function(a){return a.name});this.segmentedFunctionControl=require("segmentedControl").create(),this.segmentedFunctionControl.init(c,a),this.segmentedFunctionControl.selectSegmentByIndex(this.currentlyShownFunctionIndex),this.segmentedFunctionControl.segmentSelectedCallback=function(a){if(b.currentlyShownFunctionIndex===a)b.setFunctionIndexToShow(a);else{var c=100;b.$functionContainers.animate({opacity:0},c,function(){b.setFunctionIndexToShow(a),b.$functionContainers.animate({opacity:1},c)})}},this.isSegmentedFunctionControlEnabled||this.segmentedFunctionControl.disable()}},{key:"renderLanguageSegmentedController",value:function(a){var b=this;this.segmentedLanguageControl=require("segmentedControl").create(),this.segmentedLanguageControl.init(this.segmentedControlLanguages,a),this.segmentedLanguageControl.selectSegmentByIndex(this.selectedSegmentedControlIndex),this.segmentedLanguageControl.segmentSelectedCallback=function(a){var c=b.selectedSegmentedControlIndex;a!==c&&(b.selectedSegmentedControlIndex=a,0===c&&b.hadErrorCompiling()?b.segmentedLanguageControl.selectSegmentByIndex(0):(b.render(),b.focusCursorOnOutputIfOutputIsEditable()||b.focusOnFunction()))},this.isSegmentedLanguageControlEnabled||this.segmentedLanguageControl.disable()}},{key:"updateShownFunction",value:function(){null!==this.currentlyShownFunctionIndex&&this.$functionContainers&&!this.isCodeCurrentlyShown()&&this.$functionContainers.hide().eq(this.currentlyShownFunctionIndex).show()}},{key:"setFunctionIndexToShow",value:function(a){this.currentlyShownFunctionIndex=a,this.updateShownFunction(),this.focusCursorOnOutputIfOutputIsEditable()}},{key:"focusCursorOnOutputIfOutputIsEditable",value:function(){if(this.isOutputEditable){var a=this.isCodeCurrentlyShown()?0:this.currentlyShownFunctionIndex;this.$functionContainers.eq(a).find(".console").focus()}return this.isOutputEditable}},{key:"enterExecution",value:function(){var a=!this.hadErrorCompiling();return a&&(this.isInExecuteMode=!0,this.isPseudocodeCurrentlyEditable=!1,this.isSegmentedFunctionControlEnabled=!1,this.executor.enterExecution(),this.getTopOfStack().node.isNextToExecute=!0,this.currentlyShownFunctionIndex=0),this.render(),a}},{key:"exitExecution",value:function(){this.isInExecuteMode=!1,this.isPseudocodeCurrentlyEditable=this.isPseudocodeEditable,this.isSegmentedFunctionControlEnabled=!0,this.lastFunctionOnStack=null,this.executor.exitExecution(),this.render()}},{key:"restartExecution",value:function(){this.exitExecution(),this.enterExecution()}},{key:"executeOnce",value:function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.previousNodeExecuted=this.getTopOfStack().node,this.previousNodeExecuted.isNextToExecute=!1,this.lastFunctionOnStack=this.executor.execute()||this.lastFunctionOnStack,this.isExecutionDone())this.currentlyShownFunctionIndex=0;else{var b=this.getTopOfStack(),c=this.executor.program.functions.map(function(a){return a.name});b.node.isNextToExecute=!0,this.currentlyShownFunctionIndex=c.indexOf(b.function.name)}a||this.render()}},{key:"hadErrorCompiling",value:function(){var a=this.getPseudocode();if(this.isPseudocodeEditingRestricted){var b=this.restrictedCode.pre.length,c=a.length-this.restrictedCode.post.length;this.restrictedCode.placeholder=a.substring(b,c)}this.errorMessage=null,this.errorLineNumber=null;try{this.executor.setProgramAndCodeFromCode(a),this.executor.validateInput(),this.portLanguage&&(this.portedCodeController.programCode=this.executor.program.getPortedCode(this.portLanguage))}catch(a){return this.compilationErrorCallback&&this.compilationErrorCallback(a.message),this.errorMessage=a.message,this.errorLineNumber=a.lineNumber,!0}return!1}},{key:"getTopOfStack",value:function(){return this.executor.stack[this.executor.stack.length-1]}},{key:"getPseudocode",value:function(){return this.functionControllers.length?this.functionControllers[0].getPseudocode():this.executor.code}},{key:"isExecutionDone",value:function(){return this.executor.isExecutionDone()}},{key:"setIsCompact",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.isCompact=a,this.showFunctionName=!a,this.maxHeight=b,this.maxWidth=c}},{key:"setIsOutputEditable",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.isOutputEditable=a,this.outputChangeFunction=b}},{key:"setIsInputEditable",value:function(a){this.isInputEditable=a}},{key:"isPseudocodeIncluded",value:function(){return["pseudocode","both"].includes(this.languagesToShow)}},{key:"setLanguagesToShow",value:function(a,b){this.languagesToShow=a,this.portLanguage=b;var c=this.isPseudocodeIncluded();this.selectedSegmentedControlIndex=c?0:this.selectedSegmentedControlIndex,c&&!this.pseudocodeController&&(this.pseudocodeController=new T(this.executor.code));var d={both:["Code","Flowchart"],flowchart:["Flowchart"],pseudocode:["Code"]};if(this.segmentedControlLanguages=d[a],b){this.segmentedControlLanguages.push(b);var e=this.executor.program.getPortedCode(b);this.portedCodeController=new S(e,b)}}},{key:"setIsPseudocodeEditable",value:function(a){var b=this;this.isPseudocodeEditable=a,this.isPseudocodeCurrentlyEditable=this.isPseudocodeEditable&&!this.isInExecuteMode,this.functionControllers.forEach(function(a){return a.setIsPseudocodeEditable(b.isPseudocodeCurrentlyEditable)})}},{key:"setIsPseudocodeEditingRestricted",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.isPseudocodeEditingRestricted=a,this.restrictedCode=a?new Oa(b,c,d):null,this.restrictedCode)try{this.executor.setProgramAndCodeFromCode(b+c+d)}catch(a){$.noop()}}},{key:"setIsSegmentedLanguageControlEnabled",value:function(a){this.isSegmentedLanguageControlEnabled=a,this.segmentedLanguageControl&&(a?this.segmentedLanguageControl.enable():this.segmentedLanguageControl.disable())}},{key:"setCompilationErrorCallback",value:function(a){this.compilationErrorCallback=a}},{key:"setCodeChangeCallback",value:function(a){this.pseudocodeController&&this.pseudocodeController.setCodeChangeCallback(a)}},{key:"setPseudocode",value:function(a){this.pseudocodeController&&this.pseudocodeController.setPseudocode(a)}},{key:"setNeedsAccessibleAndInteractive",value:function(a){this.needsAccessibleAndInteractive=a}},{key:"focusOnFunction",value:function(){if(this.functionControllers.length){var a=this.isCodeCurrentlyShown()?0:this.currentlyShownFunctionIndex;this.functionControllers[a].focus()}}},{key:"getPseudocodeLanguageIndex",value:function(){return this.segmentedControlLanguages.indexOf("Code")}},{key:"isPseudocodeCurrentlyShown",value:function(){return this.getPseudocodeLanguageIndex()===this.selectedSegmentedControlIndex}},{key:"isPortedCodeCurrentlyShown",value:function(){return this.segmentedControlLanguages.indexOf(this.portLanguage)===this.selectedSegmentedControlIndex}},{key:"isCodeCurrentlyShown",value:function(){return this.isPseudocodeCurrentlyShown()||this.isPortedCodeCurrentlyShown()}}]),a}(),L=function(a){function f(a,b){e(this,f);var d=c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,b));return d.flowchart=a,d.renderingIndicatorAndControllerPairs=[],d.edgeControllers=[],d.canvas=null,d}return d(f,a),H(f,[{key:"render",value:function(){var a=this;this.$containerDOM.html(lc.templates.flowchart());var c=this.$containerDOM.children(".flowchart-canvas").get(0);this.canvas=Raphael(c,0,0);var d=new tb,e=d.make(this.flowchart);e.forEach(function(b){var c=null;switch(b.getName()){case"NodeRenderingIndicator":c=(new va).make(b.node,a.canvas);break;case"MergeTrueRenderingIndicator":c=new R(a.canvas,b);break;case"MergeFalseRenderingIndicator":case"BackToLoopRenderingIndicator":break;default:throw new Error("FlowchartController's render function has unrecognized rendering indicator")}c&&a.renderingIndicatorAndControllerPairs.push(new U(b,c))}),this.renderingIndicatorAndControllerPairs.forEach(function(a){a.controller.render()});var f=Math.max.apply(Math,b(this.renderingIndicatorAndControllerPairs.map(function(a){return a.indicator.column}))),g=require("utilities").createArrayOfSizeN(f+1).map(function(a,b){return b}),h=0;g.forEach(function(c){var d=a.renderingIndicatorAndControllerPairs.filter(function(a){return a.indicator.column===c}).map(function(a){return a.controller}),e=Math.max.apply(Math,b(d.map(function(a){return a.getWidth()})));d.forEach(function(a){var b=Math.max((e-a.getWidth())/2,1);a.drawing.translate(h+b,0)}),h=h+e+lc.spaceBetweenColumns});var i=Math.max.apply(Math,b(this.renderingIndicatorAndControllerPairs.map(function(a){return a.indicator.row}))),j=require("utilities").createArrayOfSizeN(i+1).map(function(a,b){return b}),k=0;j.forEach(function(c){var d=a.renderingIndicatorAndControllerPairs.filter(function(a){return a.indicator.row===c}).map(function(a){return a.controller}),e=Math.max.apply(Math,b(d.map(function(a){return a.getHeight()})).concat([0]));d.forEach(function(a){var b=Math.max((e-a.getHeight())/2,1);a.drawing.translate(0,k+b)}),k=k+e+lc.spaceBetweenRows}),e.forEach(function(b,c){var d=e[c-1];if(d){var f={NodeRenderingIndicator:a.makeEdgeControllerForNodeRenderingIndicator,BackToLoopRenderingIndicator:a.makeEdgeControllerForBackToLoopIndicator,MergeTrueRenderingIndicator:a.makeEdgeControllerForMergeTrueIndicator,MergeFalseRenderingIndicator:a.makeEdgeControllerForMergeFalseIndicator},g=d.getName(),h=f[g].call(a,d,b,a.canvas,e);h&&(h.render(),a.edgeControllers.push(h))}});var l=this.edgeControllers.map(function(a){return a.getRight()}),m=this.renderingIndicatorAndControllerPairs.map(function(a){return a.controller.getRight()}),n=Math.max.apply(Math,b(l).concat(b(m)))+1,o=this.edgeControllers.map(function(a){return a.getBottom()}),p=this.renderingIndicatorAndControllerPairs.map(function(a){return a.controller.getBottom()}),q=Math.max.apply(Math,b(o).concat(b(p)))+1;this.canvas.setSize(n,q),c.firstChild.setAttribute("aria-label",this.flowchart.makeAriaLabel())}},{key:"showNextToExecuteNode",value:function(a){var c=this.renderingIndicatorAndControllerPairs.filter(function(a){return a.controller.node}),d=c.find(function(b){return b.controller.node===a});if(d){var e=d.indicator.row,f=d.indicator.column,g=Math.max.apply(Math,b(c.map(function(a){return a.indicator.row}))),h=Math.max.apply(Math,b(c.map(function(a){return a.indicator.column}))),i=this.$containerDOM.children(".flowchart-canvas"),j=5,k=i.scrollLeft(),l=i.scrollTop();if(0===f)k=0;else if(f===h)k=i.width();else{var m=this.renderingIndicatorAndControllerPairs.filter(function(a){return a.indicator.column===f}).map(function(a){return a.controller}),n=Math.min.apply(Math,b(m.map(function(a){return a.getLeft()})))-j,o=Math.max.apply(Math,b(m.map(function(a){return a.getRight()})))+j,p=i.scrollLeft(),q=p+i.width();n<p?k=n:o>q&&(k=p+(o-q))}if(0===e)l=0;else if(e===g)l=i.height();else{var r=this.renderingIndicatorAndControllerPairs.filter(function(a){return a.indicator.row===e}).map(function(a){return a.controller}),s=Math.min.apply(Math,b(r.map(function(a){return a.getTop()})))-j,t=Math.max.apply(Math,b(r.map(function(a){return a.getBottom()})))+j,u=i.scrollTop(),v=u+i.height();s<u?l=s:t>v&&(l=u+(t-v))}i.stop().animate({scrollTop:l,scrollLeft:k})}}},{key:"getHorizontalScroll",value:function(){return this.$containerDOM.children(".flowchart-canvas").scrollLeft()}},{key:"getVerticalScroll",value:function(){return this.$containerDOM.children(".flowchart-canvas").scrollTop()}},{key:"setHorizontalScroll",value:function(a){this.$containerDOM.children(".flowchart-canvas").scrollLeft(a)}},{key:"setVerticalScroll",value:function(a){this.$containerDOM.children(".flowchart-canvas").scrollTop(a)}},{key:"getHeight",value:function(){return this.canvas.canvas.getBoundingClientRect().height}},{key:"getWidth",value:function(){return this.canvas.canvas.getBoundingClientRect().width}},{key:"makeEdgeControllerForNodeRenderingIndicator",value:function(a,b,c){var d=this.findNodeControllerFromNode(a.node),e=null;switch(b.getName()){case"NodeRenderingIndicator":var f=this.findNodeControllerFromNode(b.node);e=["LoopNode","IfNode","ElseIfNode"].indexOf(a.node.getName())>=0?new ha(c,d,f,"true"):new ia(c,d,f);break;case"BackToLoopRenderingIndicator":if("LoopNode"===a.node.getName())e=new ga(c,d);else{var g=this.findNodeControllerFromNode(b.loopNode);e=new ca(c,d,g)}break;case"MergeTrueRenderingIndicator":case"MergeFalseRenderingIndicator":var h="MergeTrueRenderingIndicator"===b.getName(),i=-1!==["IfNode","ElseIfNode"].indexOf(a.node.getName()),j=h&&i?"true":"",k=this.findPointControllerFromIndicator(b);e=new ha(c,d,k,j);break;default:throw new Error("Undefined indicator when trying to create edge controller in makeEdgeControllerForNodeRenderingIndicator")}return e}},{key:"makeEdgeControllerForBackToLoopIndicator",value:function(a,c,d,e){var f=this.findNodeControllerFromNode(a.loopNode),g=null;switch(c.getName()){case"NodeRenderingIndicator":var h=this.findNodeControllerFromNode(c.node);g=new ia(d,f,h,"false");break;case"BackToLoopRenderingIndicator":var i=this.findNodeControllerFromNode(c.loopNode);g=new ca(d,f,i,"false");break;case"MergeTrueRenderingIndicator":var j=this.findPointControllerFromIndicator(c);g=new _(d,f,j);break;case"MergeFalseRenderingIndicator":var k=this.findPointControllerFromIndicator(c),l=Math.max.apply(Math,b(this.edgeControllers.map(function(a){return a.getBottom()}))),m=this.computeNextPointY(c,e);g=new Y(d,f,k,l,m);break;default:throw new Error("Undefined indicator when trying to create edge controller in makeEdgeControllerForBackToLoopIndicator")}return g}},{key:"makeEdgeControllerForMergeTrueIndicator",value:function(a,c,d,e){var f=null;switch(c.getName()){case"NodeRenderingIndicator":var g=this.findNodeControllerFromNode(a.ifElseIfNode),h=this.findNodeControllerFromNode(c.node);f="ElseIfNode"===c.node.getName()?new ia(d,g,h,"false"):new Z(d,g,h);break;case"BackToLoopRenderingIndicator":throw new Error("Invalid indicator ordering: MergeTrue -> BackToLoop");case"MergeTrueRenderingIndicator":throw new Error("Invalid indicator ordering: MergeTrue -> MergeTrue");case"MergeFalseRenderingIndicator":var i=this.findNodeControllerFromNode(a.ifElseIfNode),j=this.findPointControllerFromIndicator(c),k=this.renderingIndicatorAndControllerPairs.filter(function(b){return b.indicator.row===a.row}).map(function(a){return a.controller}),l=Math.max.apply(Math,b(k.map(function(a){return a.getBottom()}))),m=this.computeNextPointY(c,e);f=new ba(d,i,j,l,m);break;default:throw new Error("Undefined indicator when trying to create edge controller in makeEdgeControllerForMergeTrueIndicator")}return f}},{key:"makeEdgeControllerForMergeFalseIndicator",value:function(a,b,c){var d=null;switch(b.getName()){case"NodeRenderingIndicator":if("IfNode"===a.ifElseIfNode.getName()){var e=this.findPointControllerFromIndicator(a),f=this.findNodeControllerFromNode(b.node);d=new ea(c,e,f)}break;case"BackToLoopRenderingIndicator":if("IfNode"===a.ifElseIfNode.getName()){var g=this.findPointControllerFromIndicator(a),h=this.findNodeControllerFromNode(b.loopNode),i=this.findNodeControllerFromNode(b.nodeBeforeLoopNode),j=this.edgeControllers[this.edgeControllers.length-1];d=new da(c,g,h,i,j)}break;case"MergeTrueRenderingIndicator":if(a.ifElseIfNode===b.ifElseIfNode)throw new Error("Invalid indicator ordering: MergeFalse -> MergeTrue for the same node");if("IfNode"!==a.ifElseIfNode.getName())throw new Error("Invalid indicator ordering: MergeFalse (elseif) -> MergeTrue");var k=this.findPointControllerFromIndicator(a),l=this.findPointControllerFromIndicator(b);d=new fa(c,k,l);break;case"MergeFalseRenderingIndicator":if("IfNode"===a.ifElseIfNode.getName()){var m=this.findPointControllerFromIndicator(a),n=this.findPointControllerFromIndicator(b),o=this.edgeControllers[this.edgeControllers.length-1],p=o.getBottom();d=new aa(c,m,n,p)}break;default:throw new Error("Undefined indicator when trying to create edge controller in makeEdgeControllerForMergeFalseIndicator")}return d}},{key:"computeNextPointY",value:function(a,b){var c=b.indexOf(a)+1,d=b[c];return d&&"MergeTrueRenderingIndicator"===d.getName()?this.findPointControllerFromIndicator(d).getVerticalCenter():null}},{key:"findNodeControllerFromNode",value:function(a){return this.renderingIndicatorAndControllerPairs.find(function(b){return b.controller.node===a}).controller}},{key:"findPointControllerFromIndicator",value:function(a){return this.renderingIndicatorAndControllerPairs.find(function(b){return b.indicator.ifElseIfNode===a.ifElseIfNode}).controller}}]),f}(I),M=function(){function a(b){e(this,a),this.canvas=b,this.drawing=b.set()}return H(a,[{key:"render",value:function(){throw new Error("FlowchartElementController's render function should be overridden")}},{key:"getBottom",value:function(){return Math.max.apply(Math,b(this.drawing.items.map(function(a){return a.getBBox().y+a.getBBox().height})))}},{key:"getTop",value:function(){return Math.min.apply(Math,b(this.drawing.items.map(function(a){return a.getBBox().y})))}},{key:"getLeft",value:function(){return Math.min.apply(Math,b(this.drawing.items.map(function(a){return a.getBBox().x})))}},{key:"getRight",value:function(){return Math.max.apply(Math,b(this.drawing.items.map(function(a){return a.getBBox().x+a.getBBox().width})))}},{key:"getLeftAtVerticalCenter",value:function(){return this.getLeft()}},{key:"getRightAtVerticalCenter",value:function(){return this.getRight()}},{key:"getHorizontalCenter",value:function(){return(this.getRight()+this.getLeft())/2}},{key:"getVerticalCenter",value:function(){return(this.getBottom()+this.getTop())/2}},{key:"getWidth",value:function(){return this.getRight()-this.getLeft()}},{key:"getHeight",value:function(){return this.getBottom()-this.getTop()}}]),a}(),N=function a(b,c,d){e(this,a),this.programFunction=b,this.horizontalScroll=c,this.verticalScroll=d},O=function(){function a(b,c,d,f,g){e(this,a),this.programFunction=b,this.programCode=c,this.$containerDOM=d,this.input=f,this.output=g,this.codeController=null,this.parametersController=null,this.localsController=null,this.returnController=null,this.inputController=null,this.outputController=null,this.showFunctionName=!1,this.isOutputEditable=!1,this.isInputEditable=!1,this.outputChangeFunction=null,this.isPseudocodeCurrentlyShown=!1,this.isPortedCodeCurrentlyShown=!1,this.isPseudocodeEditable=!1,this.isPseudocodeEditingRestricted=!1,this.restrictedCode=null,this.isInExecuteMode=!1,this.needsAccessibleAndInteractive=!1}return H(a,[{key:"render",value:function(){this.$containerDOM.html(lc.templates.function({hasInputOrOutput:this.input||this.output,hasVariables:this.programFunction.parameters.length||this.programFunction.locals.length||this.programFunction.return.length,functionName:this.programFunction.name,isCodeCurrentlyShown:this.isPseudocodeCurrentlyShown||this.isPortedCodeCurrentlyShown,showVariablesNotShownMessage:!this.isInExecuteMode&&this.isPseudocodeCurrentlyShown,showFunctionName:this.showFunctionName})),this.isPseudocodeCurrentlyShown||this.isPortedCodeCurrentlyShown?(this.codeController.setContainerDOM(this.$containerDOM.find(".function-container")),this.codeController.setNeedsAccessibleAndInteractive(this.needsAccessibleAndInteractive),this.isPseudocodeCurrentlyShown&&(this.codeController.setIsPseudocodeEditable(this.isPseudocodeEditable),this.codeController.setIsPseudocodeEditingRestricted(this.isPseudocodeEditingRestricted,this.restrictedCode))):this.codeController=new L(this.programFunction.flowchart,this.$containerDOM.find(".function-container")),this.codeController.setIsInExecuteMode(this.isInExecuteMode),this.codeController.render(),this.programFunction.parameters.length&&(this.parametersController=new V(this.programFunction.parameters,this.$containerDOM.find(".parameter-variables-container")),this.parametersController.render()),this.programFunction.locals.length&&(this.localsController=new V(this.programFunction.locals,this.$containerDOM.find(".local-variables-container")),this.localsController.render()),this.programFunction.return.length&&(this.returnController=new V(this.programFunction.return,this.$containerDOM.find(".return-variable-container")),this.returnController.render()),this.input&&(this.inputController=new P(this.input,this.$containerDOM.find(".input-container")),this.inputController.setIsEditable(this.isInputEditable),this.inputController.render()),this.output&&(this.outputController=new Q(this.output,this.$containerDOM.find(".output-container")),this.outputController.setIsEditable(this.isOutputEditable,this.outputChangeFunction),this.outputController.render())}},{key:"showNextToExecuteNode",value:function(a,b){this.codeController.showNextToExecuteNode(a,b)}},{key:"makeFunctionAndCodeScrollAmount",value:function(){var a=0,b=0;return this.isPseudocodeCurrentlyShown||this.isPortedCodeCurrentlyShown||(a=this.codeController.getHorizontalScroll(),b=this.codeController.getVerticalScroll()),new N(this.programFunction,a,b)}},{key:"setFunctionCodeScrollAmount",value:function(a){this.isPseudocodeCurrentlyShown||this.isPortedCodeCurrentlyShown||(this.codeController.setHorizontalScroll(a.horizontalScroll),this.codeController.setVerticalScroll(a.verticalScroll))}},{key:"getFunctionCodeHeight",value:function(){return this.codeController.getHeight()}},{key:"getFunctionCodeWidth",value:function(){return this.codeController.getWidth()}},{key:"getVariableAndIOHeight",value:function(){return this.$containerDOM.find(".variables-and-IO-container").height()}},{key:"getVariableWidth",value:function(){var a=0,b=this.$containerDOM.find(".function-variables-container");if(b.length){var c=this.$containerDOM.find(".input-output-container");c.hide(),a=b.width(),c.show()}return a}},{key:"setVariableAndIOHeight",value:function(a){var b=this.isOutputEditable?"min-height":"height";this.$containerDOM.find(".variables-and-IO-container").css(b,a)}},{key:"setVariableAndIOWidth",value:function(a){var b=this.isOutputEditable?"min-width":"width";this.$containerDOM.find(".variables-and-IO-container").css(b,a)}},{key:"setShowFunctionName",value:function(a){this.showFunctionName=a}},{key:"hideFunctionCode",value:function(){this.$containerDOM.find(".function-container").hide()}},{key:"showFunctionCode",value:function(){this.$containerDOM.find(".function-container").show()}},{key:"setIsOutputEditable",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.isOutputEditable=a,this.outputChangeFunction=b}},{key:"setIsInputEditable",value:function(a){this.isInputEditable=a}},{key:"setIsPseudocodeCurrentlyShown",value:function(a,b){this.isPseudocodeCurrentlyShown=a,a&&(this.codeController=b)}},{key:"setIsPortedCodeCurrentlyShown",value:function(a,b){this.isPortedCodeCurrentlyShown=a,a&&(this.codeController=b)}},{key:"setIsPseudocodeEditable",value:function(a){this.isPseudocodeEditable=a,this.codeController&&this.codeController.setIsPseudocodeEditable&&this.codeController.setIsPseudocodeEditable(this.isPseudocodeEditable)}},{key:"setIsPseudocodeEditingRestricted",value:function(a,b){this.isPseudocodeEditingRestricted=a,this.restrictedCode=b}},{key:"setIsInExecuteMode",value:function(a){this.isInExecuteMode=a}},{key:"setError",value:function(a,b){this.codeController.setError(a,b)}},{key:"setNeedsAccessibleAndInteractive",value:function(a){this.needsAccessibleAndInteractive=a}},{key:"clearError",value:function(){this.codeController.clearError()}},{key:"getPseudocode",value:function(){return this.codeController&&this.codeController.getPseudocode?this.codeController.getPseudocode():this.programCode}},{key:"focus",value:function(){this.codeController&&this.codeController.focus()}}]),a}(),P=function(){function a(b,c){e(this,a),this.input=b,this.$containerDOM=c,this.isEditable=!1,this.input.registerController(this)}return H(a,[{key:"render",value:function(){var a=this,b=this.isEditable&&this.input.isEditable?"true":"false";if(this.$containerDOM.html(lc.templates.input({isEditable:b})),this.updatedInputString(),this.input.isEditable){var c=this.$containerDOM.find(".numerical-input");c.blur(function(){a.input.userInput=c.get(0).innerText,a.input.registeredControllers.forEach(function(a){a.updatedInputString()})})}}},{key:"updatedInputString",value:function(){var a=this.$containerDOM.find(".numerical-input");if(this.input.isEditable)a.get(0).innerText=this.input.userInput;else{var b=this.input.initialInputs.length-this.input.inputs.length,c=this.input.initialInputs.slice(0,b),d=c.map(function(a){return"<span class='consumed'>"+a+"</span>"}),e=d.concat(this.input.inputs).join(" ");a.html(e)}}},{key:"setIsEditable",value:function(a){this.isEditable=a}}]),a}(),Q=function(){function a(b,c){e(this,a),this.output=b,this.$containerDOM=c,this.isEditable=!1,this.onChangeFunction=null,this.output.registerController(this)}return H(a,[{key:"render",value:function(){var a=this;if(this.$containerDOM.html(lc.templates.output({isEditable:this.isEditable})),this.updatedOutput(),this.isEditable){var b=this.$containerDOM.find(".console");b.on("input",function(){a.output.setOutputOfOtherControllers(a,b.val()),a.onChangeFunction&&a.onChangeFunction()})}}},{key:"updatedOutput",value:function(){var a=this.$containerDOM.find(".console");this.isEditable?(a.val(this.output.output),this.onChangeFunction&&this.onChangeFunction()):(this.$containerDOM.find(".numerical-output").text(this.output.output+"_"),a.scrollTop(a.prop("scrollHeight")))}},{key:"setIsEditable",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.isEditable=a,this.onChangeFunction=b}}]),a}(),R=function(a){function b(a,d){e(this,b);var f=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return f.point=d,f}return d(b,a),H(b,[{key:"render",value:function(){var a=this.canvas.circle(0,0,0);a.attr("stroke","#888"),this.drawing.push(a)}}]),b}(M),S=function(a){function b(a,d){e(this,b);var f=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return f.portLanguage=d,f}return d(b,a),H(b,[{key:"render",value:function(){if(this.hasRendered){var a=this.needsAccessibleAndInteractive?this.$textarea:$(this.editor.container);this.$containerDOM.append(a)}else{if(this.needsAccessibleAndInteractive)this.$containerDOM.html('<textarea aria-label="Auto-generated C++ code"></textarea>'),this.$textarea=this.$containerDOM.find("textarea");else{var b=y(),c="code-editor-"+b;this.$containerDOM.html(lc.templates.pseudocode({codeEditorID:c})),this.editor=ace.edit(c);var d={"C++":"cpp"};require("utilities").aceBaseSettings(this.editor,d[this.portLanguage])}this.hasRendered=!0}this.needsAccessibleAndInteractive?this.$textarea.val(this.programCode):(this.editor.setValue(this.programCode,1),this.editor.moveCursorToPosition({column:0,row:0})),this.disable(),this.isInExecuteMode||this.$containerDOM.removeClass("disabled")}},{key:"showNextToExecuteNode",value:function(a){if(!this.needsAccessibleAndInteractive){this.removeLineNumberHighlighter();var b=a&&a.portedLine;if(b&&$.isNumeric(b.lineNumber)){var c=b.lineNumber-1;this.editor.session.setBreakpoint(c),this.ensureLineNumberInView(b.lineNumber);var d=b.startIndexOfSegment,e=b.endIndexOfSegment;a.nonBuiltInFunctionCalls.length&&(d=a.nonBuiltInFunctionCalls[0].portedStartIndexToHighlight,e=a.nonBuiltInFunctionCalls[0].portedEndIndexToHighlight);var f=e?e+1:0,g=this.editor.selection.getRange();g.setStart(c,d),g.setEnd(c,f),this.editor.selection.setSelectionRange(g)}else this.editor.selection.clearSelection()}}}]),b}(J),T=function(a){function b(a){e(this,b);var d=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return d.codeChangeCallback=null,d.isPseudocodeEditable=!1,d.isPseudocodeEditingRestricted=!1,d.restrictedCode=null,d.restrictedEditor=null,d}return d(b,a),H(b,[{key:"render",value:function(){var a=this;if(this.hasRendered){var b=this.needsAccessibleAndInteractive?this.$textarea:$(this.editor.container);this.$containerDOM.append(b)}else{if(this.codeChangeCallback&&this.codeChangeCallback(this.programCode),this.needsAccessibleAndInteractive)this.$containerDOM.html('<textarea aria-label="Program code"></textarea>'),this.$textarea=this.$containerDOM.find("textarea"),this.$textarea.val(this.programCode).change(function(){a.codeChangeCallback&&a.codeChangeCallback(a.$textarea.val())});else{var c=y(),d="code-editor-"+c;if(this.$containerDOM.html(lc.templates.pseudocode({codeEditorID:d})),this.editor=ace.edit(d),require("utilities").aceBaseSettings(this.editor,"zyFlowchart"),this.editor.setValue(this.programCode,1),this.editor.getSession().setUndoManager(new ace.UndoManager),this.isPseudocodeEditingRestricted){this.restrictedEditor=require("restrictedEditor").create(),this.restrictedEditor.init(this.editor,function(){a.displayNonEditableAreaErrorMessage()}),this.restrictedEditor.initializeNonEditableAreas(this.restrictedCode.pre,this.restrictedCode.post,this.restrictedCode.placeholder);var e=this.editor.session.doc.indexToPosition(this.restrictedCode.pre.length);this.editor.moveCursorToPosition(e)}else this.restrictedEditor=null,this.editor.moveCursorToPosition({column:0,row:0});this.editor.getSession().on("change",function(){a.codeChangeCallback&&a.codeChangeCallback(a.editor.getSession().getValue())})}this.hasRendered=!0}this.updateEditability()}},{key:"displayNonEditableAreaErrorMessage",value:function(){if(!this.needsAccessibleAndInteractive){var a=this.$containerDOM.find(".gutter-highlight");a.removeClass("gutter-highlight-flash");setTimeout(function(){a.addClass("gutter-highlight-flash")},50)}}},{key:"showNextToExecuteNode",value:function(a,b){if(!this.needsAccessibleAndInteractive){this.removeLineNumberHighlighter();var c=a;a&&"EndNode"===a.getName()&&b&&(c=b);var d=c&&c.line&&c.line.lineNumber;if($.isNumeric(d)){var e=d-1;this.editor.session.setBreakpoint(e),this.ensureLineNumberInView(d);var f=c.line.startIndexOfSegment,g=c.line.endIndexOfSegment;c.nonBuiltInFunctionCalls.length?(f=c.nonBuiltInFunctionCalls[0].startIndexToHighlight,g=c.nonBuiltInFunctionCalls[0].endIndexToHighlight):"EndNode"===a.getName()&&(f=0,g=0);var h=g?g+1:0,i=this.editor.selection.getRange();i.setStart(e,f),i.setEnd(e,h),this.editor.selection.setSelectionRange(i)}else this.editor.selection.clearSelection()}}},{key:"setIsPseudocodeEditable",value:function(a){this.isPseudocodeEditable=a,this.updateEditability()}},{key:"setIsPseudocodeEditingRestricted",value:function(a,b){this.isPseudocodeEditingRestricted=a,this.restrictedCode=b}},{key:"updateEditability",value:function(){this.isPseudocodeEditable?this.enable():this.disable()}},{key:"enable",value:function(){if(this.editor){$(this.editor.renderer.$cursorLayer.element).show(),this.$containerDOM.removeClass("disabled"),this.editor.setOptions({readOnly:!1,highlightActiveLine:!0,highlightGutterLine:!0}),this.removeLineNumberHighlighter()}else this.$textarea&&this.$textarea.prop("disabled",!1)}},{key:"getPseudocode",value:function(){return this.needsAccessibleAndInteractive?this.$textarea.val():this.editor.getValue()}},{key:"setPseudocode",value:function(a){this.needsAccessibleAndInteractive?this.$textarea.val(a):this.editor.setValue(a,-1)}},{key:"setError",value:function(a,b){if(!this.needsAccessibleAndInteractive){var c=0,d=b-1;this.editor.getSession().setAnnotations([{column:c,row:d,text:a,type:"error"}]),this.ensureLineNumberInView(b),this.editor.moveCursorToPosition({column:c,row:d}),this.editor.selection.clearSelection(),this.focus()}}},{key:"clearError",value:function(){this.needsAccessibleAndInteractive||this.editor.getSession().clearAnnotations()}},{key:"setCodeChangeCallback",value:function(a){this.codeChangeCallback=a}}]),b}(J),U=function a(b,c){e(this,a),this.indicator=b,this.controller=c},V=function(){function a(b,c){e(this,a),this.variables=b,this.$containerDOM=c}return H(a,[{key:"render",value:function(){var a=[],c=!1;this.variables.forEach(function(d){var e=d.isArray();if(c=c||e,e){var f=new Ob(d),g=[];"0"===f.value?g.push(new Nb("empty")):"?"===f.value?g.push(new Nb("not set")):g.push.apply(g,b(d.arrayCells.map(function(a){return new Mb(a,d.name)}))),a.push.apply(a,[f].concat(g))}else a.push(new Pb(d.cell))}),this.$containerDOM.html(lc.templates.variables({hasArray:c,variablesName:this.variables.name,variableRenderList:a}))}},{key:"hide",value:function(){this.$containerDOM.hide()}},{key:"show",value:function(){this.$containerDOM.show()}}]),a}(),W=function(a){function b(a){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e(this,b);var f=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return f.labelText=d,f}return d(b,a),H(b,[{key:"render",value:function(){var a=this.makeEdge(),b="#999";if(a.attr({"arrow-end":"classic-wide-long",stroke:b,"stroke-width":2}),this.drawing.push(a),this.labelText){var c=this.canvas.text(0,0,this.labelText);c.attr({fill:b,"font-family":"'Roboto', sans-serif","font-size":"11px"}),c.node.setAttribute("class","edge-label"),this.moveLabelIntoPosition(c),this.drawing.push(c)}}},{key:"makeEdge",value:function(){throw new Error("FlowchartEdgeController's makeEdge function should be overridden")}},{key:"moveLabelIntoPosition",value:function(a){throw new Error("FlowchartEdgeController's moveLabelIntoPosition function should be overridden")}}]),b}(M),X=function(a){function b(a,d){e(this,b);var f=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,"true"));return f.loopNodeController=d,f}return d(b,a),H(b,[{key:"moveLabelIntoPosition",value:function(a){g(a,this.loopNodeController)}}]),b}(W),Y=function(a){function b(a,d,f,g,h){e(this,b);var i=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,"false"));return i.loopNodeController=d,i.pointController=f,i.largestBottomYOfPreviousEdges=g,i.pointY=h,i}return d(b,a),H(b,[{key:"makeEdge",value:function(){var a=this.loopNodeController.getHorizontalCenter(),b=this.loopNodeController.getBottom(),c=this.pointController.getLeft(),d=lc.spaceBetweenRows/2,e=Math.max(b,this.largestBottomYOfPreviousEdges)+d;return this.pointY&&(e=this.pointY),this.canvas.path("M "+a+", "+b+" V "+e+" H "+c)}},{key:"moveLabelIntoPosition",value:function(a){f(a,this.loopNodeController,5,-4)}}]),b}(W),Z=function(a){function b(a,d,f){e(this,b);var g=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,"false"));return g.ifNodeController=d,g.childNodeController=f,g}return d(b,a),H(b,[{key:"makeEdge",value:function(){var a=this.ifNodeController.getBottom(),b=this.ifNodeController.getHorizontalCenter(),c=this.childNodeController.getVerticalCenter(),d=this.childNodeController.getLeftAtVerticalCenter();return this.canvas.path("M "+b+", "+a+" V "+c+" H "+d)}},{key:"moveLabelIntoPosition",value:function(a){f(a,this.ifNodeController)}}]),b}(W),_=function(a){function b(a,d,f){e(this,b);var g=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,"false"));return g.loopNodeController=d,g.pointNodeController=f,g}return d(b,a),H(b,[{key:"makeEdge",value:function(){var a=this.loopNodeController.getHorizontalCenter(),b=this.loopNodeController.getBottom(),c=this.pointNodeController.getLeftAtVerticalCenter(),d=this.pointNodeController.getVerticalCenter();return this.canvas.path("M "+a+", "+b+" V "+d+" H "+c)}},{key:"moveLabelIntoPosition",value:function(a){f(a,this.loopNodeController)}}]),b}(W),aa=function(a){function b(a,d,f,g){e(this,b);var h=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return h.startPointerController=d,h.endPointerController=f,h.endYOfPreviousEdge=g,h}return d(b,a),H(b,[{key:"makeEdge",value:function(){var a=this.startPointerController.getHorizontalCenter(),b=this.startPointerController.getBottom(),c=this.endPointerController.getLeft(),d=this.endYOfPreviousEdge;return this.canvas.path("M "+a+", "+b+" V "+d+" H "+c)}}]),b}(W),ba=function(a){function b(a,d,f,g,h){e(this,b);var i=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,"false"));return i.ifNodeController=d,i.pointController=f,i.verticalOffset=g,i.pointY=h,i}return d(b,a),H(b,[{key:"makeEdge",value:function(){var a=this.ifNodeController.getBottom(),b=this.ifNodeController.getHorizontalCenter(),c=this.verticalOffset+lc.spaceBetweenRows/2,d=this.pointController.getBottom()+lc.spaceBetweenRows/2,e=Math.max(c,d,this.pointY),f=this.pointController.getLeft();return this.canvas.path("M "+b+", "+a+" V "+e+" H "+f)}},{key:"moveLabelIntoPosition",value:function(a){f(a,this.ifNodeController,7,-6)}}]),b}(W),ca=function(a){function b(a,d,f){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";e(this,b);var h=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,g));return h.startNodeController=d,h.loopNodeController=f,h}return d(b,a),H(b,[{key:"makeEdge",value:function(){var a=this.startNodeController.getBottom(),b=this.startNodeController.getHorizontalCenter(),c=b+", "+a,d=lc.spaceBetweenRows/2,e=this.loopNodeController.getRight()+lc.spaceBetweenColumns/2,f=this.loopNodeController.getVerticalHalfwayBetweenRightAndBottomCorners(),g=this.loopNodeController.getHorizontalHalfwayBetweenRightAndBottomCorners(),h=g+", "+f;return this.canvas.path("M "+c+" V "+(a+d)+" H "+e+" L "+h)}},{key:"moveLabelIntoPosition",value:function(a){f(a,this.startNodeController)}}]),b}(W),da=function(a){function b(a,d,f,g,h){e(this,b);var i=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return i.pointController=d,i.loopNodeController=f,i.nodeBeforeLoopController=g,i.previousEdgeController=h,i}return d(b,a),H(b,[{key:"makeEdge",value:function(){var a=this.pointController.getHorizontalCenter(),b=this.pointController.getBottom(),c=Math.max(this.nodeBeforeLoopController.getBottom(),this.previousEdgeController.getBottom()),d=c+3*lc.spaceBetweenRows/4,e=this.loopNodeController.getRight()+lc.spaceBetweenColumns/2,f=this.loopNodeController.getHorizontalHalfwayBetweenRightAndBottomCorners(),g=this.loopNodeController.getVerticalHalfwayBetweenRightAndBottomCorners();return this.canvas.path("M "+a+", "+b+" V "+d+" H "+e+" L "+f+", "+g)}}]),b}(W),ea=function(a){function b(a,d,f){e(this,b);var g=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return g.pointController=d,g.nodeController=f,g}return d(b,a),H(b,[{key:"makeEdge",value:function(){var a=this.pointController.getHorizontalCenter(),b=this.pointController.getBottom(),c=this.nodeController.getHorizontalCenter(),d=this.nodeController.getTop();return this.canvas.path("M "+a+", "+b+" V "+(d-lc.spaceBetweenRows)+" H "+c+" V "+d)}}]),b}(W),fa=function(a){function b(a,d,f){e(this,b);var g=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return g.startPointerController=d,g.endPointerController=f,g}return d(b,a),H(b,[{key:"makeEdge",value:function(){var a=this.startPointerController.getHorizontalCenter(),b=this.startPointerController.getBottom(),c=this.endPointerController.getLeft(),d=this.endPointerController.getVerticalCenter();return this.canvas.path("M "+a+", "+b+" V "+d+" H "+c)}}]),b}(W),ga=function(a){function b(){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return d(b,a),H(b,[{key:"makeEdge",value:function(){var a=this.loopNodeController.getRightAtVerticalCenter(),b=this.loopNodeController.getVerticalCenter(),c=this.loopNodeController.getVerticalHalfwayBetweenRightAndBottomCorners(),d=this.loopNodeController.getHorizontalHalfwayBetweenRightAndBottomCorners(),e=a+", "+b,f=30,g=a+f,h=this.loopNodeController.getBottom(),i=d+", "+c;return this.canvas.path("M"+e+" H"+g+" V"+h+" H"+a+" L"+i)}}]),b}(X),ha=function(a){function b(a,d,f){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";e(this,b);var h=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,g));return h.nodeController=d,h.flowchartElementController=f,h}return d(b,a),H(b,[{key:"makeEdge",value:function(){var a=this.nodeController.getRightAtVerticalCenter(),b=this.nodeController.getVerticalCenter(),c=this.flowchartElementController.getLeftAtVerticalCenter();return this.canvas.path("M "+a+", "+b+" H "+c)}},{key:"moveLabelIntoPosition",value:function(a){g(a,this.nodeController,9)}}]),b}(W),ia=function(a){function b(a,d,f){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";e(this,b);var h=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,g));return h.startNodeController=d,h.endNodeController=f,h}return d(b,a),H(b,[{key:"makeEdge",value:function(){var a=this.startNodeController.getBottom(),b=this.startNodeController.getHorizontalCenter(),c=this.endNodeController.getTop();return this.canvas.path("M "+b+", "+a+" V "+c)}},{key:"moveLabelIntoPosition",value:function(a){f(a,this.startNodeController)}}]),b}(W),ja=function(a){function b(a,d){e(this,b);var f=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,d));return f.node=a,f.nodeCode=a.userExpression,f.nodeComment=a.getCommentsAsString(),f.textPadding=12,f}return d(b,a),H(b,[{key:"render",value:function(){var a=this.canvas.text(0,0,this.nodeComment),b=this.canvas.text(0,0,this.nodeCode),c={"font-family":"'Roboto', sans-serif","font-size":"12px"};a.attr(c).attr("fill","#999"),b.attr(c).attr("fill",require("utilities").zyanteGray);var d=a.getBBox().height+b.getBBox().height,e=Math.max(a.getBBox().width,b.getBBox().width),f=d+this.textPadding,g=e+this.textPadding,h=this.makeNodeShape(g,f),i="rgb(217, 133, 80)",j="rgb(249, 216, 188)",k="rgb(94, 129, 213)",l=this.node.isNextToExecute?j:"white",m=this.node.isNextToExecute?i:k;h.toBack(),h.attr({fill:l,stroke:m,"stroke-width":2});var n=h.getBBox().width/2,o=h.getBBox().height/2;a.attr({x:n,y:o-b.getBBox().height/2}),b.attr({x:n,y:o+a.getBBox().height/2}),this.drawing.push(h,b,a);var p=this.makeNodeContentBackground(a,b,h,e,d);p&&(a.toFront(),b.toFront(),this.drawing.push(p))}},{key:"makeNodeContentBackground",value:function(a,b,c,d,e){return null}},{key:"makeNodeShape",value:function(a,b){throw new Error("FlowchartNodeController's makeNodeShape function should be overridden")}}]),b}(M),ka=function(a){function b(){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return d(b,a),H(b,[{key:"makeNodeShape",value:function(a,b){return this.canvas.rect(0,0,a,b)}}]),b}(ja),la=function(a){function b(){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return d(b,a),H(b,[{key:"makeNodeShape",value:function(a,b){var c=a;return this.canvas.rect(0,0,a,b,c)}}]),b}(ja),ma=function(a){function b(a,d){e(this,b);var f=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));return f.parallelogramAngleWidth=null,f}return d(b,a),H(b,[{key:"makeNodeShape",value:function(a,b){this.parallelogramAngleWidth=b/Math.tan(1.2);var c="0, "+b,d=this.parallelogramAngleWidth+", 0",e=2*this.parallelogramAngleWidth+a+", 0",f=this.parallelogramAngleWidth+a+", "+b;return this.canvas.path("M "+c+" L "+d+" L "+e+" L "+f+" Z")}},{key:"getLeftAtVerticalCenter",value:function(){return this.getLeft()+this.parallelogramAngleWidth/2}},{key:"getRightAtVerticalCenter",value:function(){return this.getRight()-this.parallelogramAngleWidth/2}}]),b}(ja),na=function(a){function b(a,d){e(this,b);var f=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));return f.nodeCode=a.userAssignedExpression+" = "+a.userExpression,f}return d(b,a),b}(ka),oa=function(a){function b(a,d){e(this,b);var f=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));return f.nodeContentBackgroundPadding=4,f.textPadding+=f.nodeContentBackgroundPadding,f}return d(b,a),H(b,[{key:"makeNodeShape",value:function(a,b){var c=55,d=120,e=Math.max(b,c),f=Math.max(a,d),g=e/2,h=f/2,i="0, "+g,j=h+", 0",k=f+", "+g,l=h+", "+e;return this.canvas.path("M "+i+" L "+j+" L "+k+" L "+l+" Z")}},{key:"makeNodeContentBackground",value:function(a,b,c,d,e){var f=null,g=this.nodeComment?Math.min(a.getBBox().x,b.getBBox().x):b.getBBox().x,h=this.nodeComment?a.getBBox().y:b.getBBox().y,i=c.getBBox().height/2;if(h<-1*c.getBBox().height/c.getBBox().width*g+i){var j=this.nodeContentBackgroundPadding/2;f=this.canvas.rect(g-j,h-j,d+this.nodeContentBackgroundPadding,e+this.nodeContentBackgroundPadding),f.attr({fill:"white",stroke:"#ddd","stroke-width":1})}return f}},{key:"getVerticalHalfwayBetweenRightAndBottomCorners",value:function(){return(this.getVerticalCenter()+this.getBottom())/2}},{key:"getHorizontalHalfwayBetweenRightAndBottomCorners",value:function(){return(this.getHorizontalCenter()+this.getRight())/2}}]),b}(ja),pa=function(a){function b(){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return d(b,a),b}(oa),qa=function(a){function b(a,d){e(this,b);var f=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));return f.nodeCode="End",f}return d(b,a),b}(la),ra=function(a){function b(){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return d(b,a),b}(ka),sa=function(a){function b(){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return d(b,a),b}(oa),ta=function(a){function b(a,d){e(this,b);var f=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));return f.nodeCode=a.userExpression+" = Get next input",f}return d(b,a),b}(ma),ua=function(a){function b(){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return d(b,a),b}(oa),va=function(){function a(){e(this,a)}return H(a,[{key:"make",value:function(a,b){switch(a.getName()){case"AssignmentNode":return new na(a,b);case"DecisionNode":return new oa(a,b);case"ElseIfNode":return new pa(a,b);case"EndNode":return new qa(a,b);case"FunctionCallNode":return new ra(a,b);case"IfNode":return new sa(a,b);case"InputNode":return new ta(a,b);case"LoopNode":return new ua(a,b);case"OutputNode":return new wa(a,b);case"StartNode":return new xa(a,b);default:throw new Error("NodeControllerFactory's make given unrecognized node name")}}}]),a}(),wa=function(a){function b(a,d){e(this,b);var f=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));return f.nodeCode="Put "+a.userExpression+" to output",a.precisionExpression&&(f.nodeCode+=" with "+a.precisionExpression+" decimal places"),f}return d(b,a),b}(ma),xa=function(a){function b(a,d){e(this,b);var f=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));return f.nodeCode="Start",f}return d(b,a),b}(la),ya=function(){function a(b,c,d,f){e(this,a),this.name=b,this.locals=c,this.parameters=d,this.return=f,this.flowchart=null,this.wasFunctionInjected=!1}return H(a,[{key:"isBuiltIn",value:function(){return!1}},{key:"clone",value:function(){var b=this.locals.clone(),c=this.parameters.clone(),d=this.return.clone(),e=[b,c,d],f=new a(this.name,b,c,d);return f.flowchart=this.flowchart.clone(e),f}},{key:"setParametersDuringExecution",value:function(a){var b=this;a.forEach(function(a,c){var d=b.parameters[c],e=[b.locals,b.parameters,b.return];d.isArray()?a.copyMemoryCellValuesTo(d,!0,!0):d.setValueDuringExecution(a.getValue(e))})}},{key:"getVariableValueByName",value:function(a){var b=[this.locals,this.parameters,this.return],c=v(a,b);return String(c)}},{key:"setWasFunctionInjected",value:function(a){this.wasFunctionInjected=a}},{key:"hasArray",value:function(){return this.locals.hasArray()||this.parameters.hasArray()||this.return.hasArray()}},{key:"usesBuiltInFunctions",value:function(a){return this.flowchart.prefixOrder.some(function(b){return A(b,a)})}},{key:"makePortedVariableDeclaration",value:function(a,b){var c=a.getPortedDataType(b)+" "+a.name;if(a.isArray()){var d=a.sizeCell.getValue();"?"!==d&&(c+="("+d+")")}return c}},{key:"buildPortedFunctionHeader",value:function(a,b){var c=this,d="Main"===this.name?"main":this.name,e="void";"main"===d?e="int":this.return[0]&&(e=this.return[0].getPortedDataType(b));var f=this.parameters.map(function(a){return c.makePortedVariableDeclaration(a,b)}).join(", ");return a.add(e+" "+d+"("+f+") {"),d}},{key:"makeVariableDeclaration",value:function(a,b,c){return""+c+this.makePortedVariableDeclaration(a,b)+";"}},{key:"buildPortedLocalVariables",value:function(a,b,c){var d=this,e=this.locals.map(function(a){return d.makeVariableDeclaration(a,b,c)}),f=this.return[0]?this.makeVariableDeclaration(this.return[0],b,c):[],g=e.concat(f),h=g.map(function(a){return"\n"+a}).join("");a.add(h)}},{key:"buildPortedFunctionStatements",value:function(a,b,c){return this.flowchart.buildPortedCode(a,b,c,this.wasFunctionInjected)}},{key:"buildPortedFunctionReturnStatement",value:function(a,b,c){var d="";"main"===c?d="0":this.return.length&&(d=this.return[0].name);var e=d?" "+d:"";a.add("\n\n"+b+"return"+e+";")}},{key:"buildPortedCode",value:function(a,b){var c={"C++":"   "},d=c[b],e=this.buildPortedFunctionHeader(a,b),f=this.return.concat(this.locals).concat(this.parameters).map(function(a){return a.name}),g=f.find(function(a){return require("utilities").cppReservedWords.includes(a)});if(g)throw new Error(g+" is a reserved C++ word, so a different variable name should be used.");this.buildPortedLocalVariables(a,b,d);var h=this.buildPortedFunctionStatements(a,b,d),i=h.endNode,j=h.secondNode;this.buildPortedFunctionReturnStatement(a,d,e),i.portedLine.lineNumber=a.numberOfLines(),i.portedLine.startIndexOfSegment=0,i.portedLine.endIndexOfSegment=a.lengthOfLastLine()-1,this.flowchart.startNode.portedLine.lineNumber=j.portedLine.lineNumber,a.add("\n}")}}]),a}(),za=function(a){function b(a,d,f,g,h,i){e(this,b);var j=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,f,g,h));return j.flowchart=d,j.executionFunction=i,j}return d(b,a),H(b,[{key:"isBuiltIn",value:function(){return!0}},{key:"execute",value:function(a){this.executionFunction(this.parameters,this.return,a)}}]),b}(ya),Aa=function(){function a(b,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e(this,a);var f=d?"\n"+d:"";this.message="Line "+c.lineNumber+": "+b+f,this.lineNumber=c.lineNumber}return H(a,[{key:"toString",value:function(){return this.message}}]),a}(),Ba=function a(b,c,d,f){e(this,a),this.input=b,this.output=c,this.arrayOfVariables=d,this.randomizer=f},Ca=function a(b,c){e(this,a),this.function=b,this.node=c},Da=function(){function a(b,c,d){var f=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e(this,a),this.code=null,this.program=null,f?this.setProgramAndCodeFromCode(b):this.code=b;var g="string"==typeof c;this.input=g?new Ja(c):null,this.output=d?new Ka:null,this.stack=[],this.randomizer=new Na}return H(a,[{key:"setProgramAndCodeFromCode",value:function(a){if(this.code!==a||!this.program){this.code=a,this.program=null;var b=new Pa;this.program=b.parse(a)}}},{key:"enterExecution",value:function(){var a=this.program.functions[0].clone();this.stack.push(new Ca(a,a.flowchart.startNode)),this.input&&this.input.initialize(),this.randomizer.initialize()}},{key:"exitExecution",value:function(){this.stack.length=0,this.input&&this.input.editable(),this.output&&this.output.clear()}},{key:"execute",value:function(){var a=this;this.stack.forEach(function(a){a.function.locals&&a.function.locals.clearWrittenTo(),a.function.parameters&&a.function.parameters.clearWrittenTo(),a.function.return&&a.function.return.clearWrittenTo()});var b=this.stack[this.stack.length-1];if(b.node.nonBuiltInFunctionCalls.length){var c=b.node.nonBuiltInFunctionCalls[0],d=b.function,e=c.function.clone(),f=c.children.map(function(b){return l(b,a.makeExecutionContext(d))});e.setParametersDuringExecution(f),this.stack.push(new Ca(e,e.flowchart.startNode))}else{var g=this.stack.pop(),h=g.node.execute(this.makeExecutionContext(g.function));g.node.reset(),h?this.stack.push(new Ca(g.function,h)):this.stack.length&&this.stack[this.stack.length-1].node.resolveFunctionCall(g.function.return[0])}return this.stack[this.stack.length-1]&&this.stack[this.stack.length-1].function}},{key:"makeExecutionContext",value:function(a){return new Ba(this.input,this.output,[a.parameters,a.locals,a.return],this.randomizer)}},{key:"isExecutionDone",value:function(){return 0===this.stack.length}},{key:"validateInput",value:function(){this.input&&this.input.validateUserInput()}}]),a}(),Ea="parserGeneratedVariable",Fa=function(){function a(){e(this,a)}return H(a,[{key:"parse",value:function(a,b,c){var d=a;if("string"==typeof a){d=(new wb).tokenize(a).map(function(a){return a.tokens}).reduce(function(a,b){return a.concat(b)},[])}d=d.filter(function(a){return-1===["indent","spaces"].indexOf(a.name)});var e=this.buildAbstractSymbolTree(d,b,c);return new Ha(new Sa(e),this.staticAnalysisErrorRunner(e))}},{key:"buildAbstractSymbolTree",value:function(a,b,c){for(var d=[],e=[],f=null;a.length;){var g=this.isAnOperand(f),h=this.makeSymbol(a,g,b,c);if(this.throwErrorIfInputNotValid(h,f),h.isAnOperand())d.push(h);else{for(;e.length&&this.doesAHaveLowerPrecedenceThanB(h,e[e.length-1]);)this.popOperator(d,e);e.push(h)}f=h}for(this.throwErrorIfInvalidEnding(f);e.length;)this.popOperator(d,e);return 1===d.length&&0===e.length||this.throwGenericError(),d[0]}},{key:"throwErrorIfInputNotValid",value:function(a,b){var c=this.isAnOperand(a),d=a?a.getClassName():"";if(c===this.isAnOperand(b)&&"UnaryOperatorSymbol"!==d){var e="";e=c?this.getSpecificSymbolName(a):a.operator,this.throwSpecificError(e)}}},{key:"getSpecificSymbolName",value:function(a){var b="",c=a.getClassName();if(a.isInsideParens)b="(";else switch(c){case"SubscriptOperatorSymbol":b=a.children[0].variable.name;break;case"VariableSymbol":b=a.variable,b.name!==Ea&&(b=b.name);break;case"FunctionCallSymbol":b=a.firstToken.value;break;default:this.throwGenericError()}return b}},{key:"throwErrorIfInvalidEnding",value:function(a){var b=this.isAnOperand(a),c=a&&a.isAnOperator();if(!b&&c)this.throwSpecificError(a.operator);else if(!a)throw new Ga("Expected expression")}},{key:"isAnOperand",value:function(a){return Boolean(a)&&a.isAnOperand()}},{key:"throwSpecificError",value:function(a){throw new Ga("Error parsing expression starting at "+a)}},{key:"throwGenericError",value:function(){throw new Ga("Error parsing expression")}},{key:"popOperator",value:function(a,b){var c=b.pop();a.length<1&&this.throwGenericError(),"BinaryOperatorSymbol"===c.getClassName()&&(c.children[1]=a.pop()),a.length<1&&this.throwGenericError(),c.children[0]=a.pop(),a.push(c)}},{key:"doesAHaveLowerPrecedenceThanB",value:function(a,b){var c=a.getPrecedence()>b.getPrecedence();return a.isLeftAssociative()&&(c=a.getPrecedence()>=b.getPrecedence()),c}},{key:"makeSymbol",value:function(a,b,c,d){var e=a[0],f=null;switch(e.name){case"word":if(!t(e.value)){var g="Invalid identifier: "+e.value,h=u(e.value)?oc[e.value]:g;throw new Ga(h)}var i=c.map(function(a){return a.getVariable(e.value)}).find(function(a){return a}),j=d.find(function(a){return a.name===e.value});if(i){var k=a.shift(),l=new Ya(i);f=l,a.length&&("openingBracket"===a[0].name?f=this.makeSubscriptSymbol(l,a,c,d):"period"===a[0].name&&(f=this.makeMemoryCellFromMemberAccess(i,a,k)))}else{if(!j){var m=r(e.value,c,d);throw new Ga("Unknown word '"+e.value+"'",m)}if("Main"===j.name)throw new Ga("Calling Main function is not allowed");f=this.makeFuctionCallSymbol(a,j,c,d)}break;case"integerNumber":case"floatNumber":f=this.makeVariableSymbolFromNumber(a);break;case"arithmeticOperator":case"conditionalOperator":if(b){var n=a.shift().value;if("not"===n)throw new Ga(n+" is not a binary operator");f=new Ta(n)}else{var o=a.shift().value;if(-1===["not","-","+"].indexOf(o))throw new Ga(o+" is not a unary operator");f=new Xa(o)}break;case"openingParens":f=this.makeSymbolFromParens(a,c,d),f.isInsideParens=!0;break;default:var p="Unexpected token "+e.value+" in expression",q=u(e.value)?oc[e.value]:p;throw new Ga(q)}return f}},{key:"makeVariableSymbolFromNumber",value:function(a){var b=a.shift(),c=null,d=null;return"integerNumber"===b.name?(c=new Jb(Ea),d=parseInt(b.value,10)):(c=new Hb(Ea),d=parseFloat(b.value)),c.setValue(d),new Ya(c)}},{key:"makeSymbolFromParens",value:function(a,b,c){var d=this.getSubExpressionInParens(a);if(!d.length)throw new Ga("Unexpected closing parens");return this.buildAbstractSymbolTree(d,b,c)}},{key:"makeSubscriptSymbol",value:function(a,b,c,d){var e=this.getSubExpressionInsideParensOrBracket(b,"bracket"),f=this.buildAbstractSymbolTree(e,c,d),g=new Wa;return g.children[0]=a,g.children[1]=f,g}},{key:"makeMemoryCellFromMemberAccess",value:function(a,b,c){b.shift();var d=b.shift();if(!d)throw new Ga("Unexpected period after variable");var e=a.getMemoryCellByName(a.name+"."+d.value);return new Va(e,c,d)}},{key:"makeFuctionCallSymbol",value:function(a,c,d,e){var f,g=this,h=a.shift(),i=a[a.length-1],j=h.name,k=a.slice();if("openingParens"!==a[0].name)throw new Ga("Expected opening parens for "+j+" function call");var l=this.getSubExpressionInParens(a),m=[],n=0,o=[];if(l.length){for(;l.length;){var p=l.shift();"comma"!==p.name||n?("openingParens"===p.name?n++:"closingParens"===p.name&&n--,o.push(p)):(m.push(o),o=[])}if(m.push(o),m.find(function(a){return!a.length}))throw new Ga("An argument in "+j+" is empty, but shouldn't be.")}if(a.length){i=k[k.indexOf(a[0])-1]}var q=new Ua(c,h,i);return(f=q.children).push.apply(f,b(m.map(function(a){return g.buildAbstractSymbolTree(a,d,e)}))),q}},{key:"getSubExpressionInParens",value:function(a){return this.getSubExpressionInsideParensOrBracket(a,"parens")}},{key:"getSubExpressionInsideParensOrBracket",value:function(a,b){var c=b.toLowerCase(),d=c.charAt(0).toUpperCase()+c.slice(1);a.shift();for(var e=1,f=[];a.length;){var g=a.shift();if(g.name==="opening"+d?e++:g.name==="closing"+d&&e--,0===e)break;f.push(g)}if(e)throw new Ga("Expected a closing "+c);return f}},{key:"staticAnalysisErrorRunner",value:function(a){var b=this,c=a.children.map(function(a){return b.staticAnalysisErrorRunner(a)});if(c.some(function(a){return!a})){var d="Function call returns nothing. ";throw"FunctionCallSymbol"===a.getClassName()?d+="Cannot pass nothing to next function call":d+="Cannot perform operation on nothing",new Ga(d)}var e=null,f=["IntegerVariable","FloatVariable"];switch(a.getClassName()){case"VariableSymbol":e=a.variable;break;case"MemoryCellSymbol":e=this.makeVariableFromType(a.memoryCell.type);break;case"SubscriptOperatorSymbol":if(!c[0].isArray())throw new Ga("Cannot subscript a non-array variable");if("IntegerVariable"!==c[1].getClassName())throw new Ga("Subscript value must be an integer");e=this.makeVariableFromType(c[0].type);break;case"UnaryOperatorSymbol":case"BinaryOperatorSymbol":var g=c.every(function(a){return f.indexOf(a.getClassName()>=0)});if(zb.test(a.operator)){var h=["not","and","or"].indexOf(a.operator)>=0,i=c.every(function(a){return"BooleanVariable"===a.getClassName()});if(h&&!i)throw new Ga(a.operator+" must be connected to a conditional operator");if(!h&&!g)throw new Ga(a.operator+" must relate numbers");e=this.makeVariableFromType("boolean")}else{if(!g)throw new Ga(a.operator+" must operate on numbers");var j=c.some(function(a){return"IntegerVariable"!==a.getClassName()});e=this.makeVariableFromType(j?"float":"integer")}break;case"FunctionCallSymbol":var k=a.function.parameters;if(a.children.length!==k.length){var l=a.function.name;throw new Ga("Expected call to "+l+" to have "+k.length+" arguments but found "+a.children.length)}c.forEach(function(b,c){var d=["IntegerArray","FloatArray"],e=d.indexOf(k[c].getClassName())>=0,g=d.indexOf(b.getClassName())>=0,h=f.indexOf(k[c].getClassName())>=0,i=f.indexOf(b.getClassName())>=0;if(e&&!g)throw new Ga(a.function.name+" call expected an array argument but found a non-array argument");if(h&&!i)throw new Ga(a.function.name+" call expected a number argument but found a non-number argument")}),e=a.function.return.length?a.function.return[0]:e}return e}},{key:"makeVariableFromType",value:function(a){var b=null;return"integer"===a?b=new Jb(Ea):"float"===a?b=new Hb(Ea):"boolean"===a&&(b=new Fb(Ea)),b}}]),a}(),Ga=function a(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e(this,a),this.error=b,this.suggestion=c},Ha=function a(b,c){e(this,a),this.tree=b,this.rootDataType=c},Ia=function(){function a(b){e(this,a),this.startNode=b;var c=[];this.prefixNodeOrdering(b,c),this.prefixOrder=c}return H(a,[{key:"clone",value:function(b){var c=this,d=this.prefixOrder.map(function(a){return a.clone(b)});return this.prefixOrder.forEach(function(a,b){var e=d[b];a.children.forEach(function(a,b){var f=c.prefixOrder.indexOf(a);e.children[b]=d[f]})}),new a(d[0])}},{key:"prefixNodeOrdering",value:function(a,b){var c=this;b.indexOf(a)<0&&(b.push(a),a.children.forEach(function(a){c.prefixNodeOrdering(a,b)}))}},{key:"addClosingBrace",value:function(a,b,c,d){var e=c+d,f=b.repeat(e);a.add("\n"+f+"}")}},{key:"convertCommentLinesToString",value:function(a,b){return a.map(function(a){var c="\n".repeat(a.blankLinesAbove.length+1),d=B(a);return""+c+b+d}).join("")}},{key:"handleForLoopPart",value:function(a,b,c,d,e){switch(a){case"initial":var f=c+"for (";d.addToPortIndices(f.length),e.add(""+f+d.portedLine.line),d.portedLine.lineNumber=e.numberOfLines(),d.portedLine.startIndexOfSegment=f.length,d.portedLine.endIndexOfSegment=e.lengthOfLastLine()-1,e.add("; ");break;case"condition":var g=e.lengthOfLastLine();d.addToPortIndices(g),d.portedLine.lineNumber=b.portedLine.lineNumber,d.portedLine.startIndexOfSegment=g,e.add(d.portedLine.line),d.portedLine.endIndexOfSegment=e.lengthOfLastLine()-1,e.add("; ");break;case"update":var h=b.portedLine.lineNumber,i=e.lengthOfLineNumber(h);d.addToPortIndices(i),d.portedLine.lineNumber=h,d.portedLine.startIndexOfSegment=i,e.addToLine(""+d.portedLine.line,h),d.portedLine.endIndexOfSegment=e.lengthOfLineNumber(h)-1,e.addToLine(") {",h)}}},{key:"handleNodePort",value:function(a){var b=a.language,c=a.node,d=a.baseIndentAmount,e=a.indentation,f=a.lineNumberToForLoopParts,g=a.previousIndicator,h=a.portedCode,i=c.getName();if(!["StartNode","EndNode"].includes(i)){c.makePortedLine(b);var j=d+c.indentationAmount,k=e.repeat(j);if(!c.line.isFromForLoop||!f[c.line.lineNumber]){if("MergeTrueRenderingIndicator"===g.getName()&&"ElseIfNode"!==i){var l=e.repeat(j-1),m=this.convertCommentLinesToString(g.ifElseIfNode.elseCommentLines,l);h.add(m+"\n"+l+"else {")}var n=this.convertCommentLinesToString(c.commentLines,k),o="\n".repeat(c.line.blankLinesAbove.length+1);h.add(n+o)}if(c.line.isFromForLoop){f[c.line.lineNumber]||(f[c.line.lineNumber]=[]);var p=f[c.line.lineNumber];p.push(c);var q={1:"initial",2:"condition",3:"update"},r=q[p.length];this.handleForLoopPart(r,p[0],k,c,h)}else h.add(""+k+c.portedLine.line),c.portedLine.lineNumber=h.numberOfLines(),c.portedLine.startIndexOfSegment=0,c.portedLine.endIndexOfSegment=h.lengthOfLastLine()-1,c.addToPortIndices(k.length)}}},{key:"buildPortedCode",value:function(a,b,c,d){var e=this,f=d?1:0,g=new tb,h=g.make(this),i=null,j={};h.forEach(function(d){switch(d.getName()){case"NodeRenderingIndicator":e.handleNodePort({language:b,node:d.node,baseIndentAmount:f,indentation:c,lineNumberToForLoopParts:j,previousIndicator:i,portedCode:a});break;case"BackToLoopRenderingIndicator":e.addClosingBrace(a,c,f,d.loopNode.indentationAmount);break;case"MergeTrueRenderingIndicator":e.addClosingBrace(a,c,f,d.ifElseIfNode.indentationAmount);break;case"MergeFalseRenderingIndicator":i.getColumn(h)>d.getColumn(h)&&e.addClosingBrace(a,c,f,d.ifElseIfNode.indentationAmount)}i=d});var k=h[h.length-1].node;return this.startNode.makePortedLine(),k.makePortedLine(),{endNode:k,secondNode:h[1].node}}},{key:"makeAriaLabel",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.forZyFlowchartAuthoringTool,c=void 0!==b&&b,d=this.prefixOrder.reduce(function(a,b,c){return a.set(b,c+1),a},new Map),e=this.prefixOrder.map(function(a){return a.makeAriaLabel({forZyFlowchartAuthoringTool:c,nodeToNumber:d})}).join("\n");return"Flowchart has "+this.prefixOrder.length+" nodes.\n"+e}}]),a}(),Ja=function(){function a(b){e(this,a),this.userInput=b,this.inputs=null,this.initialInputs=null,this.registeredControllers=[],this.isEditable=!0,this.isInitiallyEmpty=!0}return H(a,[{key:"registerController",value:function(a){this.registeredControllers.push(a)}},{key:"clearRegisteredControllers",value:function(){this.registeredControllers.length=0}},{key:"validateUserInput",value:function(){this.validate(this.userInput)}},{key:"validate",value:function(a){if(!/^\s*(-?\d+(\.\d+)?\s+)*(-?\d+(\.\d+)?)?\s*$/.test(a))throw new Error("Valid input is numbers separated by whitespace. Ex: 42.5 -13")}},{key:"setUserInput",value:function(a){this.validate(a),this.initialInputs=a.match(/-?\d+(\.\d+)?/g)||[],this.inputs=this.initialInputs.slice(),this.userInput=a,this.isInitiallyEmpty=!this.inputs.length}},{key:"getNextInput",value:function(){if(this.isInitiallyEmpty)throw new Error("Program is trying to get next input, but no input values exist in the input box.");var a=this.inputs.shift();if(isNaN(a))throw new Error("Program is trying to get next input, but all input values have already been gotten.");return Number(a)}},{key:"initialize",value:function(){this.setUserInput(this.userInput),this.isEditable=!1}},{key:"editable",value:function(){this.isEditable=!0}}]),a}(),Ka=function(){function a(){e(this,a),this.output="",this.registeredControllers=[]}return H(a,[{key:"registerController",value:function(a){this.registeredControllers.push(a)}},{key:"toPrint",value:function(a){this.output+=a,this.registeredControllers.forEach(function(a){return a.updatedOutput()})}},{key:"setOutputOfOtherControllers",value:function(a,b){this.output=b,this.registeredControllers.filter(function(b){return b!==a}).forEach(function(a){return a.updatedOutput()})}},{key:"clearRegisteredControllers",value:function(){this.registeredControllers.length=0}},{key:"clear",value:function(){this.output=""}}]),a}(),La=function(){function a(){e(this,a),this.code=""}return H(a,[{key:"add",value:function(a){this.code+=a}},{key:"addToLine",value:function(a,b){var c=this.code.split("\n");c[b-1]+=a,this.code=c.join("\n")}},{key:"numberOfLines",value:function(){return this.code.split("\n").length}},{key:"lengthOfLineNumber",value:function(a){return this.code.split("\n")[a-1].length}},{key:"lengthOfLastLine",value:function(){return this.lengthOfLineNumber(this.numberOfLines())}}]),a}(),Ma=function(){function a(b){e(this,a),this.functions=b,this.portedCode=null}return H(a,[{key:"buildPortedProgramHeaderCode",value:function(a){var b=["#include <iostream>"],c=this.functions.some(function(a){return a.usesBuiltInFunctions(ic)}),d=this.functions.some(function(a){return a.usesBuiltInFunctions(jc)}),e=this.functions.some(function(a){return a.hasArray()});if(c&&b.push("#include <cmath>"),d)throw new Error("SeedRandomNumbers() and RandomNumber() not supported when porting to C++.");e&&b.push("#include <vector>"),b.push("using namespace std;"),a.add(b.join("\n"))}},{key:"getPortedCode",value:function(a){if(!["C++"].includes(a))throw new Error("Unsupported portLanguage: "+a);if(!this.portedCode){var b=new La;this.buildPortedProgramHeaderCode(b);var c=this.functions.map(function(a){return a.name}).find(function(a){return require("utilities").cppReservedWords.includes(a)});if(c)throw new Error(c+" is a reserved C++ word, so a different function name should be used.");var d=this.functions.slice();d.sort(function(a,b){return a.flowchart.startNode.line.lineNumber-b.flowchart.startNode.line.lineNumber}),d.forEach(function(c){b.add("\n\n"),c.buildPortedCode(b,a)}),this.portedCode=b}return this.portedCode.code}}]),a}(),Na=function(){function a(){e(this,a),this.alea=null}return H(a,[{key:"initialize",value:function(){var a=(new Date).getTime();this.setSeed(a)}},{key:"setSeed",value:function(a){this.alea=new alea(a)}},{key:"getNumber",value:function(){return Math.abs(this.alea.int32())}}]),a}(),Oa=function a(b,c,d){e(this,a),this.pre=b,this.placeholder=c,this.post=d},Pa=function(){function a(){e(this,a),this.parserInjectedMainMessage="Parser injected Main function",this.expressionParser=new Fa,this.indentDivisor=3}return H(a,[{key:"parse",value:function(a){var b=this,c=new wb,d=c.tokenize(a),e=[],f=d.filter(function(a){var b=Boolean(a.tokens.length),c=1===a.tokens.length&&"indent"===a.tokens[0].name,d=!b||c;return d?e.push(a):e.length&&(a.pushBlankLines(e),e.length=0),!d});f.forEach(function(a){return a.removeSpaces()}),f.filter(function(a){return"indent"===a.tokens[0].name}).filter(function(a){return!Number.isInteger(a.tokens[0].value.length/b.indentDivisor)}).forEach(function(a){return b.throwError("Indentation has "+a.tokens[0].value.length+" spaces, but Coral uses "+b.indentDivisor+"-space indents",a)});var g=[],h=[],i=kc.slice(),j=this.batchIntoFunctions(f).map(function(a){var c=a[0],d=a.slice(1,a.length),e={functionNames:i,parameterVariablesOfEachFunction:h,returnVariableOfEachFunction:g},f=b.parseFunctionDeclaration(c,e),j=f.returnVariable,k=f.functionName,l=f.parameterVariables;return i.push(k),g.push(j),h.push(l),{functionDeclarationLine:c,functionName:k,functionLines:d,parameterVariables:l,returnVariable:j}}),k=j.map(function(a){var c=a.functionDeclarationLine,d=a.functionName,e=a.functionLines,f=a.parameterVariables,g=a.returnVariable,h=c.line===b.parserInjectedMainMessage;if(!h){var j=e.filter(function(a){return"indent"!==a.tokens[0].name});j.length&&b.throwError("Code inside a function must be indented",j[0])}var k=e.filter(function(a){var b=h?0:1;return"dataType"===a.tokens[b].name}),l=e.indexOf(k[k.length-1])+1,m=e.slice(0,l).filter(function(a){var b=h?0:1;return"comment"!==a.tokens[b].name}),n=m.find(function(a){var b=h?0:1;return"dataType"!==a.tokens[b].name}),o=e.slice(l);if(n){var p=m.indexOf(n);b.throwError("Variable declaration must be at top of function. Something above this line may not be a variable declaration",m[p+1])}var q={functionNames:i,parameterVariables:f,returnVariable:g},r="Main"===d,s=r?"Variables":"Local variables",t=b.buildLocalVariablesFromLines(m,s,h,r,q);return{programFunction:new ya(d,t,f,g),flowchartLines:o,wasMainFunctionInjected:h,functionDeclarationLine:c}}),l=k.map(function(a){return a.programFunction});k.forEach(function(a){var c=a.programFunction,d=a.flowchartLines,e=a.wasMainFunctionInjected,f=l.concat(hc);c.flowchart=b.buildFlowchartFromLines(d,[c.parameters,c.locals,c.return],e,f),c.setWasFunctionInjected(e),"EndNode"!==c.flowchart.startNode.getChildNode().getName()||e||b.throwSubStatementError("A function",a.functionDeclarationLine)});var m=l.find(function(a){return"Main"===a.name});if(!m)throw new Error("Expected a Main function but didn't find one");var n=l.indexOf(m);l.splice(n,1),l.reverse(),l.unshift(m);var o=k.find(function(a){return a.programFunction===m}).functionDeclarationLine;return m.parameters.length&&this.throwError("Main cannot have any parameter variables",o),m.return.length&&this.throwError("Main cannot have a return variable",o),new Ma(l)}},{key:"buildFlowchartFromLines",value:function(a,b,c,d){this.transpileForLoopStructureToWhileLoopStructure(a,b,d);var e=new jb,f=c?0:1,g=this.buildFlowchartFromLinesRunner(a,f,f,b,d),h=new xb("",g.line?g.line.lineNumber:null),i=new db(null,null,new xb("",null));return e.setChildNode(g),e.line=h,this.updateEndNodesToBeTheSameInstance(e,i),new Ia(e)}},{key:"transpileForLoopStructureToWhileLoopStructure",value:function(a,b,c){var d=this,e=null;do{(e=a.find(function(a){var b=a.tokens.length&&"for"===a.tokens[0].value,c=a.tokens.length>1&&"indent"===a.tokens[0].name&&"for"===a.tokens[1].value;return b||c}))&&function(){var f=d.convertForLoopLineToThreeLines(e,b,c),g=f.first,h=f.second,i=f.third,j=a.indexOf(e),k=j+1;a[j]=g,a.splice(k,0,h);var l=a.filter(function(a,b){return b>k}),m=d.computeIndentationLength(g)+d.indentDivisor,n=l.find(function(a){return d.computeIndentationLength(a)<m});if(n){var o=a.indexOf(n);a.splice(o,0,i)}else a.push(i)}()}while(e)}},{key:"fillWithSpaces",value:function(a,b){var c=a.find(function(a){return b.includes(a)}),d=a[a.length-1],e=a.slice(0,a.indexOf(c)),f=b.slice(b.indexOf(c),b.indexOf(d)+1);return e.concat(f)}},{key:"convertForLoopLineToThreeLines",value:function(a,c,d){var e=this,f=a.tokens,g=f[0]&&"indent"===f[0].name?f.shift():null;f.shift();var h=[],i=[],j=[],k=[h,i,j],l=0;f.forEach(function(b){";"===b.value?++l>=k.length&&e.throwError("Too many semicolons (expected two semicolons)",a):k[l].push(b)}),l!==k.length-1&&this.throwError("Too few semicolons (expected two semicolons)",a),k[0].some(function(a){return"assignment"===a.name})||this.throwError("First part must be an assignment",a);var m="Second part must be a decision expression";k[1].some(function(a){return zb.test(a.value)})||this.throwError(m,a),k[2].some(function(a){return"assignment"===a.name})||this.throwError("Third part must be an assignment",a);var n=i.slice();i.unshift(new ub("word","while"));var o="";g&&(o=g.value,h.unshift(new ub("indent",o)),i.unshift(new ub("indent",o)));var p=o+" ".repeat(this.indentDivisor);j.unshift(new ub("indent",p));var q=a.line.split(";"),r=q[0].match(/^\s*for\s+(.*)\s*$/)[1],s=q[0].indexOf(r),t=s+r.length-1,u=q[1].trim(),v=q[0].length+1,w=q[1].indexOf(u)+v,x=w+u.length-1,y=q[2].trim(),z=v+q[1].length+1,A=q[2].indexOf(y)+z,B=A+y.length-1,C=new xb(r,a.lineNumber,s,t),D=new xb("while "+u,a.lineNumber,w,x),E=new xb(y,a.lineNumber,A,B);C.pushBlankLines(a.blankLinesAbove),C.push.apply(C,b(this.fillWithSpaces(h,a.allTokens))),D.push.apply(D,b(this.fillWithSpaces(i,a.allTokens))),E.push.apply(E,b(this.fillWithSpaces(j,a.allTokens))),C.removeSpaces(),D.removeSpaces(),E.removeSpaces(),C.isFromForLoop=!0,D.isFromForLoop=!0,E.isFromForLoop=!0;var F=null;try{F=this.runExpressionParserOnLine(n,D,c,d)}catch(b){var G=2,H=b.message.indexOf(":")+G,I=b.message.substring(H),J=1===I.length?0:1;I=I[0].toLowerCase()+I.substr(J),this.throwError("In loop expression, "+I,a)}return F.rootDataType&&"BooleanVariable"!==F.rootDataType.getClassName()&&this.throwError(m,D),{first:C,second:D,third:E}}},{key:"buildFlowchartFromLinesRunner",value:function(a,b,c,d,e){var f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],g=arguments.length>6&&void 0!==arguments[6]&&arguments[6],h=null,i=a.shift();if(i){var j=this.computeIndentationLength(i)/this.indentDivisor,k=null;if("indent"===i.tokens[0].name&&(k=i.tokens.shift()),i.tokens[0]&&"comment"===i.tokens[0].name)f.push(i),h=this.buildFlowchartFromLinesRunner(a,b,c,d,e,f,g);else if(j<c)k&&i.tokens.unshift(k),a.unshift(i);else if(j===c)"elseif"!==i.tokens[0].value||g||this.throwError("Should have if/elseif above, but does not",i),h=this.handleRecursiveBuildFlowchart(i,a,b,c,d,e,f),h.addIndentationAmount(c);else if(j>c){var l="Expected no indent";if(c>0){var m="indent"+(1===c?"":"s"),n="indent"+(1===j?"":"s"),o="Expected at most "+c+" "+m,p=", but found "+j+" "+n;l=o+p}this.throwError(l+". An indent is 3 spaces",i)}}else c>b||(h=new db);return h}},{key:"computeIndentationLength",value:function(a){return a.tokens.length&&"indent"===a.tokens[0].name?a.tokens[0].value.length:0}},{key:"handleRecursiveBuildFlowchart",value:function(a,b,c,d,e,f,g){var h=this.makeNodeFromLine(a,e,f);switch(h.addCommentLines(g),g.length=0,h.getName()){case"InputNode":case"OutputNode":case"AssignmentNode":case"FunctionCallNode":h.setChildNode(this.buildFlowchartFromLinesRunner(b,c,d,e,f,g));break;case"LoopNode":var i=this.buildFlowchartFromLinesRunner(b,c,d+1,e,f,g);i?h.line.isFromForLoop&&i.line.isFromForLoop&&h.line.lineNumber===i.line.lineNumber&&this.throwSubStatementError("A loop",a):this.throwSubStatementError("A loop",a);var j=this.buildFlowchartFromLinesRunner(b,c,d,e,f,g);this.assignLeavesChildrenToGivenNode(i,h),h.setChildNodeForTrue(i||h),h.setChildNodeForFalse(j);break;case"IfNode":case"ElseIfNode":var k=this.buildFlowchartFromLinesRunner(b,c,d+1,e,f,g);k||this.throwSubStatementError("A branch",a);var l=this.getValueOfFirstNonIndentToken(b);"elseif"!==l&&g.length&&h.commentLines.length&&(h.addElseCommentLines(g),g.length=0);var m=null;if(this.nextLineIsElseOrElseIfWithExpectedIndentation(b,d)){var n="else"===l,o=n?1:0,p=b[0];n&&this.verifyElseLineHasNoErrors(b.shift()),m=this.buildFlowchartFromLinesRunner(b,c,d+o,e,f,g,!0),n&&!m&&this.throwSubStatementError("An else statement",p)}this.nextLineIsElseOrElseIfWithExpectedIndentation(b,d)&&this.throwError("Should have if/elseif above, but does not",b[0]);var q=null;q=m&&"ElseIfNode"===m.getName()?this.findMergeNode(m):this.buildFlowchartFromLinesRunner(b,c,d,e,f,g),this.assignLeavesChildrenToGivenNode(k,q),this.assignLeavesChildrenToGivenNode(m,q),h.setChildNodeForTrue(k||q),h.setChildNodeForFalse(m||q);break;default:this.throwError("Unsupported node type",a)}return h}},{key:"verifyElseLineHasNoErrors",value:function(a){if("indent"===a.tokens[0].name&&a.tokens.shift(),a.tokens.shift(),a.tokens.length){var b="if"===a.tokens[0].value?p(["elseif"]):null;this.throwError("'else' should be the only item on the line",a,b)}}},{key:"nextLineIsElseOrElseIfWithExpectedIndentation",value:function(a,b){var c=!1;if(a.length){var d=this.computeIndentationLength(a[0])/this.indentDivisor,e=this.getValueOfFirstNonIndentToken(a),f=-1!==["else","elseif"].indexOf(e);c=b===d&&f}return c}},{key:"makeNodeFromLine",value:function(a,b,c){var d=null,e=a.tokens,f=e.shift();if("word"===f.name)if("Put"===f.value)d=this.buildOutputNodeGivenPutToken(a,b,c);else if("if"===f.value)d=this.buildIfNodeGivenIfToken(a,b,c);else if("while"===f.value)d=this.buildLoopNodeGivenWhileToken(a,b,c);else if("elseif"===f.value)d=this.buildElseIfNodeGivenElseIfToken(a,b,c);else if(e.find(function(a){return"assignment"===a.name})){for(var g=!1,h=[f];!g&&e.length;)"assignment"===e[0].name?g=!0:h.push(e.shift());var i=this.runExpressionParserOnLine(h,a,b,c);e.shift(),e.length?d="Get"===e[0].value?this.buildInputNodeGivenAssignedTree(i,h,a):this.buildAssignmentNodeGivenAssignedTree(i,h,a,b,c):this.throwError("Expected an expression after the assignment operator",a)}else e.unshift(f),d=this.buildFunctionCallNode(a,b,c);else{var j="Expected word, found "+f.name,k=this.getValueOfFirstConditionalOperator(e);j=this.appendGenericLooseConditionalErrorIfConditionalInLine(k,j),this.throwError(j,a)}return d}},{key:"appendGenericLooseConditionalErrorIfConditionalInLine",value:function(a,b){var c=b;return a&&(c+="\n"+this.genericLooseConditionalError(a)),c}},{key:"throwConditionalOperatorError",value:function(a,b,c){var d=c.map(function(a){return a.getVariableNames()}).join(","),e=b.tokens.findIndex(function(b){return b.value===a}),f=b.tokens[e-1].value,g=d.includes(f)||"]"===f,h=this.genericLooseConditionalError(a);"=="===a&&g&&(h+="\nDid you mean = instead?"),this.throwError(h,b)}},{key:"getValueOfFirstConditionalOperator",value:function(a){var b=a.find(function(a){return"conditionalOperator"===a.name});return b&&b.value}},{key:"genericLooseConditionalError",value:function(a){return"Conditional operator "+a+" used outside of branch statement"}},{key:"getValueOfFirstNonIndentToken",value:function(a){var b="";if(a.length&&a[0].tokens.length){var c=a[0].tokens;b="indent"===c[0].name?c[1]?c[1].value:"":c[0].value}return b}},{key:"assignLeavesChildrenToGivenNode",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(a&&-1===c.indexOf(a)){if(c.push(a),a===b)return;switch(a.getName()){case"EndNode":break;case"InputNode":case"OutputNode":case"AssignmentNode":case"FunctionCallNode":a.getChildNode()?this.assignLeavesChildrenToGivenNode(a.getChildNode(),b,c):a.setChildNode(b);break;case"LoopNode":case"IfNode":case"ElseIfNode":a.getChildNodeForTrue()?this.assignLeavesChildrenToGivenNode(a.getChildNodeForTrue(),b,c):a.setChildNodeForTrue(b),a.getChildNodeForFalse()?this.assignLeavesChildrenToGivenNode(a.getChildNodeForFalse(),b,c):a.setChildNodeForFalse(b);break;default:throw new Error("Unknown node type "+a.getName()+" encountered in assignLeavesChildrenToGivenNode")}}}},{key:"buildIfNodeGivenIfToken",value:function(a,b,c){var d=this.runExpressionParserOnBranchLine(a.tokens,a,b,c);return d.rootDataType&&"BooleanVariable"!==d.rootDataType.getClassName()&&this.throwError("Expression does not evaluate to a boolean value",a),new fb(d.tree,a.tokens.slice(),a)}},{key:"buildLoopNodeGivenWhileToken",value:function(a,b,c){var d=this.runExpressionParserOnBranchLine(a.tokens,a,b,c);return d.rootDataType&&"BooleanVariable"!==d.rootDataType.getClassName()&&this.throwError("Expression does not evaluate to a boolean value",a),new hb(d.tree,a.tokens.slice(),a)}},{key:"buildElseIfNodeGivenElseIfToken",value:function(a,b,c){var d=this.runExpressionParserOnBranchLine(a.tokens,a,b,c);return d.rootDataType&&"BooleanVariable"!==d.rootDataType.getClassName()&&this.throwError("Expression does not evaluate to a boolean value",a),new cb(d.tree,a.tokens.slice(),a)}},{key:"buildAssignmentNodeGivenAssignedTree",value:function(a,b,c,d,e){";"===c.tokens[c.tokens.length-1].value&&this.throwErrorEndsWithSemicolon(c);var f=this.runExpressionParserOnLine(c.tokens,c,d,e);if(a.rootDataType&&f.rootDataType){var g=a.rootDataType.isArray(),h=f.rootDataType.isArray();g&&h||(g&&!h?this.throwError("Cannot assign non-array variable to an array variable",c):!g&&h?this.throwError("Cannot assign array variable to a non-array variable",c):this.doesEvaluateToNonArrayVariable(a)?this.doesEvaluateToNumericVariable(f)||this.throwError("Right-hand side of assignment does not evaluate to integer or float",c):this.throwError("Must assign to a variable",c))}else this.throwError("Both sides of the assignment must have something",c);return new ab(a.tree,f.tree,b,c.tokens.slice(),c)}},{key:"buildFunctionCallNode",value:function(a,b,c){";"===a.tokens[a.tokens.length-1].value&&this.throwErrorEndsWithSemicolon(a);var d=this.runExpressionParserOnLine(a.tokens,a,b,c),e=this.getValueOfFirstConditionalOperator(a.tokens);return e&&this.throwConditionalOperatorError(e,a,b),d.rootDataType&&this.throwError("Function's return value not used",a),new eb(d.tree,a.tokens.slice(),a)}},{key:"buildInputNodeGivenAssignedTree",value:function(a,b,c){var d=c.tokens;return 3===d.length&&"next"===d[1].value&&"input"===d[2].value||(4===d.length&&";"===d[3].value?this.throwErrorEndsWithSemicolon(c):this.throwError("Expected input format: <variable> = Get next input",c)),this.doesEvaluateToNonArrayVariable(a)||this.throwError("Expected assignment to be to a non-array variable",c),new gb(a.tree,b,c)}},{key:"buildOutputNodeGivenPutToken",value:function(a,b,c){var d=a.tokens,e=d.shift(),f=[e],g="Expected output format: Put <string or variable> to output";e||this.throwError(g,a);var h="string"===e.name,i=null,j=null,k=null;if(!h){for(;d.length&&"to"!==d[0].value;)f.push(d.shift());j=this.runExpressionParserOnLine(f,a,b,c);j.rootDataType&&"BooleanVariable"!==j.rootDataType.getClassName()&&!j.rootDataType.isArray()||this.throwError("Expected output of a numerical value",a),i=j.tree}d.length<2&&this.throwError(g,a);var l=d.shift(),m=d.shift();"to"===l.value&&"output"===m.value||this.throwError(g,a);var n=[];if(d.length){var o=g;if("with"===d[0].value){var p="Expected output format: Put <number or variable> to output with <integer> decimal places";for(d.shift(),d.length&&j&&["FloatVariable","IntegerVariable"].includes(j.rootDataType.getClassName())||this.throwError(p,a),n.push(d.shift());d.length&&"decimal"!==d[0].value;)n.push(d.shift());var q=this.runExpressionParserOnLine(n,a,b,c);q.rootDataType&&"IntegerVariable"===q.rootDataType.getClassName()||this.throwError("Expected number of decimals places to be an integer",a),k=q.tree,d.length<2&&this.throwError(p,a);var r=d.shift(),s=d.shift();"decimal"===r.value&&"places"===s.value||this.throwError(p,a),o=p}d.length&&(1===d.length&&";"===d[0].value?this.throwErrorEndsWithSemicolon(a):this.throwError(o,a))}var t=null;try{t=new ib(i,f,a,k,n)}catch(b){this.throwError(b.message,a)}return t}},{key:"runExpressionParserOnLine",value:function(a,b,c,d){var e=null;try{e=this.expressionParser.parse(a,c,d)}catch(a){if("Expected expression"===a.error){var f=b.allTokens.find(function(a){return"indent"!==a.name});a.error+=" after "+f.value}this.throwError(a.error,b,a.suggestion)}return e}},{key:"doesEvaluateToNumericVariable",value:function(a){return!a.tree.root.operator||yb.test(a.tree.root.operator)||"SubscriptOperatorSymbol"===a.tree.root.getClassName()}},{key:"doesEvaluateToNonArrayVariable",value:function(a){var b=!1;if(a.tree.root){var c=a.tree.root.getClassName();["SubscriptOperatorSymbol","MemoryCellSymbol"].indexOf(c)>=0?b=!0:"VariableSymbol"!==c||a.tree.root.variable.isArray()||(b=!0)}return b}},{key:"buildLocalVariablesFromLines",value:function(a,b,c,d,e){var f=this,g=new Kb(b);return c||a.forEach(function(a){a.tokens.shift().value.length!==f.indentDivisor&&f.throwError("Indentation is ${indentationSize} but expected ${this.indentDivisor}",a)}),a.forEach(function(a){var b=f.makeVariable(a);if(g.getVariable(b.name)){var c=d?"":"local ";f.throwDuplicateIdentifierError(b.name,c+"variable",a)}else e.parameterVariables.getVariable(b.name)?f.throwDuplicateIdentifierError(b.name,"parameter variable",a):e.returnVariable.getVariable(b.name)?f.throwDuplicateIdentifierError(b.name,"return variable",a):e.functionNames.includes(b.name)&&f.throwDuplicateFunctionError(b.name,a);g.push(b),a.tokens.length&&f.throwContentAfterDeclarationError(g[g.length-1],a)}),g}},{key:"batchIntoFunctions",value:function(a){var c=this,d=a.some(function(a){return"Function"===a.tokens[0].value}),e=[];if(d){var f=null;a.forEach(function(a){"Function"===a.tokens[0].value?(f=[a],e.push(f)):f?f.push(a):c.throwError("Cannot have code outside function",a)})}else{var g=new xb(this.parserInjectedMainMessage,0);g.push(new ub("word","Function"),new ub("word","Main"),new ub("openingParens","("),new ub("closingParens",")"),new ub("word","returns"),new ub("dataType","nothing")),e.push([g].concat(b(a)))}return e}},{key:"parseFunctionDeclaration",value:function(a,b){var c=a.tokens;c.shift();var d=c.shift();d?"word"===d.name&&t(d.value)||this.throwError("Invalid function name",a):this.throwError("Missing function name",a);var e=d.value,f=b.functionNames.slice().concat([e]);b.functionNames.includes(e)?this.throwDuplicateFunctionError(e,a):b.parameterVariablesOfEachFunction.some(function(a){return a.getVariable(e)})?this.throwDuplicateIdentifierError(e,"parameter variable in a different function",a):b.returnVariableOfEachFunction.some(function(a){return a.getVariable(e)})&&this.throwDuplicateIdentifierError(e,"return variable in a different function",a);var g=c.shift();g&&"openingParens"===g.name||this.throwError("Missing opening parens before parameters",a);for(var h=new Kb("Parameter variables");c.length&&"closingParens"!==c[0].name;){var i=this.makeVariable(a,!0);this.checkVariableAgainstParametersAndFunctions(i.name,h,f,a),h.push(i),c.length&&("comma"===c[0].name?c.shift():"closingParens"===c[0].name||this.throwContentAfterDeclarationError(h[h.length-1],a))}var j=c.shift();j&&"closingParens"===j.name||this.throwError("Missing closing parens after parameters",a);var k=c.shift();k&&"returns"===k.value||this.throwError("Missing 'returns' keyword after closing parens",a);var l=new Kb("Return variable");if(c.length)if("dataType"===c[0].name)if("nothing"===c[0].value)c.shift();else{var m=this.makeVariable(a,!0);this.checkVariableAgainstParametersAndFunctions(m.name,h,f,a),l.push(m)}else this.throwError("Invalid return type '"+c[0].value+"'",a,s(c[0].value));else this.throwError("Missing return type after 'returns'",a);return{returnVariable:l,functionName:e,parameterVariables:h}}},{key:"checkVariableAgainstParametersAndFunctions",value:function(a,b,c,d){b.getVariable(a)?this.throwDuplicateIdentifierError(a,"parameter variable",d):c.includes(a)&&this.throwDuplicateFunctionError(a,d)}},{key:"makeVariable",value:function(a){var b=a.tokens;b.length<2&&this.throwError("Missing variable name",a);var c=b.shift().value,d=require("utilities").removeWhitespace(c),e=null;if(["integerarray","floatarray"].indexOf(d)>=0){b.length<4&&this.throwError("For array declaration, expected data type, number of elements, then variable name",a);var f=b.shift();e=b.shift().value;var g=b.shift();"openingParens"!==f.name?this.throwError("Expected opening parens after the data type",a):"closingParens"!==g.name&&this.throwError("Expected closing parens after the number of elements",a)}var h=b.shift().value,i=!1;try{switch(d){case"integer":return new Jb(h);case"float":return new Hb(h);case"integerarray":return new Ib(h,e);case"floatarray":return new Gb(h,e);default:i=!0}}catch(b){this.throwError(b.message,a)}i&&this.throwError("Unrecognized data type '"+c+"'",a,s(c))}},{key:"removeInitialTextAndTrim",value:function(a,b){return a.trim().slice(b.length).trim()}},{key:"throwSubStatementError",value:function(a,b){this.throwError(a+" must have at least one sub-statement, indented by 3 spaces",b)}},{key:"throwError",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";throw new Aa(a,b,c)}},{key:"throwBranchError",value:function(a,b){var c=this.removeInitialTextAndTrim(a,"Line "+b.lineNumber+": ");throw c.includes(" = ")&&(c+="\nDid you mean == instead?"),new Aa(c,b)}},{key:"throwErrorEndsWithSemicolon",value:function(a){this.throwError("Semicolon not needed",a)}},{key:"throwContentAfterDeclarationError",value:function(a,b){var c={IntegerVariable:"integer",FloatVariable:"float",IntegerArray:"integer array",FloatArray:"float array"},d=c[a.getClassName()],e="",f=null;a.isArray()?e=", number of elements '("+a.sizeCell.getValue()+")',":"vector"===a.name&&(f=p([d+" array"])),this.throwError("Found content after data type '"+d+"'"+e+" and variable name '"+a.name+"'",b,f)}},{key:"throwDuplicateIdentifierError",value:function(a,b,c){this.throwError("'"+a+"' is also declared as a "+b,c)}},{key:"throwDuplicateFunctionError",value:function(a,b){var c=kc.includes(a)?"built-in ":"";this.throwDuplicateIdentifierError(a,c+"function",b)}},{key:"updateEndNodesToBeTheSameInstance",value:function(a,b){var c=this,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];a.children.forEach(function(e,f){"EndNode"===e.getName()?a.children[f]=b:-1===d.indexOf(e)&&(d.push(e),c.updateEndNodesToBeTheSameInstance(e,b,d))})}},{key:"findMergeNode",value:function(a){var b=new tb,c=b.findIfElseMergeNodePairs(a),d=c.find(function(b){return b.ifElseIfNode===a});return d?d.mergeNode:null}},{key:"runExpressionParserOnBranchLine",value:function(a,b,c,d){var e=null;try{e=this.runExpressionParserOnLine(a,b,c,d)}catch(a){this.throwBranchError(a.message,b)}return e}}]),a}(),Qa=function(){function a(){e(this,a),this.children=[],this.isInsideParens=!1}return H(a,[{key:"getClassName",value:function(){throw new Error("TreeSymbol's getClassName function should be overridden")}},{key:"clone",value:function(a){throw new Error("TreeSymbol's clone function should be overridden")}},{key:"shallowCopy",value:function(){throw new Error("TreeSymbol's shallowCopy function should be overridden")}},{key:"isAnOperator",value:function(){return!1}},{key:"isAnOperand",value:function(){return!this.isAnOperator()||Boolean(this.children[0])}},{key:"has",value:function(a){return this===a||this.children.some(function(b){return b.has(a)})}},{key:"memoryCellHasToken",value:function(a,b){return this.children.some(function(c){return c.memoryCellHasToken(a,b)})}}]),a}(),Ra=function(a){function b(a){e(this,b);var d=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d.operator=a,d}return d(b,a),H(b,[{key:"isAnOperator",value:function(){return!0}},{key:"isLeftAssociative",value:function(){throw new Error("OperatorSymbol's isLeftAssociative function should be overridden")}},{key:"getPrecedence",value:function(){throw new Error("OperatorSymbol's getPrecedence function should be overridden")}}]),b}(Qa),Sa=function(){function a(b){e(this,a),this.root=b}return H(a,[{key:"clone",value:function(b){return new a(this.root.clone(b))}},{key:"shallowCopy",value:function(){return new a(this.root.shallowCopy())}},{key:"has",value:function(a){return this.root.has(a)}}]),a}(),Ta=function(a){function b(a){e(this,b);var d=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return d.leftAssociativities=["*","/","%","+","-","<",">",">=","<=","==","!=","and","or"],d.precedences={"*":3,"/":3,"%":3,"+":4,"-":4,"<":5,">":5,">=":5,"<=":5,"==":6,"!=":6,and:7,or:8},d}return d(b,a),H(b,[{key:"getClassName",value:function(){return"BinaryOperatorSymbol"}},{key:"clone",value:function(a){var c=new b(this.operator);return c.children[0]=this.children[0].clone(a),c.children[1]=this.children[1].clone(a),c}},{key:"shallowCopy",value:function(){var a=new b(this.operator);return a.children[0]=this.children[0].shallowCopy(),a.children[1]=this.children[1].shallowCopy(),a}},{key:"isLeftAssociative",value:function(){return this.leftAssociativities.includes(this.operator)}},{key:"getPrecedence",value:function(){return this.precedences[this.operator]}}]),b}(Ra),Ua=function(a){function b(a,d,f){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;e(this,b);var i=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return i.function=a,i.firstToken=d,i.lastToken=f,i.startIndexToHighlight=d.startIndexInTheLine,i.endIndexToHighlight=f.endIndexInTheLine,i.portedStartIndexToHighlight=null===g?i.startIndexToHighlight:g,i.portedEndIndexToHighlight=null===h?i.endIndexToHighlight:h,i}return d(b,a),H(b,[{key:"getClassName",value:function(){return"FunctionCallSymbol"}},{key:"addToPortIndices",value:function(a){this.portedStartIndexToHighlight+=a,this.portedEndIndexToHighlight+=a}},{key:"clone",value:function(a){var c=new b(this.function,this.firstToken,this.lastToken,this.portedStartIndexToHighlight,this.portedEndIndexToHighlight);return c.children=this.children.map(function(b){return b.clone(a)}),c}},{key:"shallowCopy",value:function(){var a=new b(this.function,this.firstToken,this.lastToken,this.portedStartIndexToHighlight,this.portedEndIndexToHighlight);return a.children=this.children.map(function(a){return a.shallowCopy()}),a}}]),b}(Qa),Va=function(a){function b(a,d,f){e(this,b);var g=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return g.memoryCell=a,g.firstToken=d,g.lastToken=f,g}return d(b,a),H(b,[{key:"getClassName",value:function(){return"MemoryCellSymbol"}},{key:"clone",value:function(a){return new b(v(this.memoryCell.name,a),this.firstToken,this.lastToken)}},{key:"shallowCopy",value:function(){return new b(this.memoryCell,this.firstToken,this.lastToken)}},{key:"memoryCellHasToken",value:function(a,b){var c=b.indexOf(this.firstToken),d=b.indexOf(this.lastToken);return b.slice(c,d+1).includes(a)||this.children.some(function(c){return c.memoryCellHasToken(a,b)})}}]),b}(Qa),Wa=function(a){function b(){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,"[]"))}return d(b,a),H(b,[{key:"getClassName",value:function(){return"SubscriptOperatorSymbol"}},{key:"clone",value:function(a){var c=new b;return c.children[0]=this.children[0].clone(a),c.children[1]=this.children[1].clone(a),c}},{key:"shallowCopy",value:function(){var a=new b;return a.children[0]=this.children[0].shallowCopy(),a.children[1]=this.children[1].shallowCopy(),a}},{key:"isLeftAssociative",value:function(){return!0}},{key:"getPrecedence",value:function(){return 1}}]),b}(Ra),Xa=function(a){function b(){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return d(b,a),H(b,[{key:"getClassName",value:function(){return"UnaryOperatorSymbol"}},{key:"clone",value:function(a){var c=new b(this.operator);return c.children[0]=this.children[0].clone(a),c}},{key:"shallowCopy",value:function(){var a=new b(this.operator);return a.children[0]=this.children[0].shallowCopy(),a}},{key:"isLeftAssociative",value:function(){return!1}},{key:"getPrecedence",value:function(){return 2}}]),b}(Ra),Ya=function(a){function b(a){e(this,b);var d=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d.variable=a,d}return d(b,a),H(b,[{key:"getClassName",value:function(){return"VariableSymbol"}},{key:"clone",value:function(a){var c=this;return new b(this.variable.name===Ea?this.variable.clone():a.map(function(a){return a.getVariable(c.variable.name)}).find(function(a){return a}))}},{key:"shallowCopy",value:function(){return new b(this.variable)}}]),b}(Qa),Za=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e(this,a),this.expression=b,this.originalExpression=b&&b.shallowCopy(),this.expressionTokens=c&&this.fillInSpaceTokens(c,d&&d.allTokens),this.line=d,this.userExpression=this.convertTokensToString(this.expressionTokens),this.children=[],this.commentLines=[],this.nonBuiltInFunctionCalls=[],this.isNextToExecute=!1,this.portedLine=null,this.indentationAmount=0,b&&w(this.expression.root,this.nonBuiltInFunctionCalls)}return H(a,[{key:"addCommentLines",value:function(a){var c;(c=this.commentLines).push.apply(c,b(a))}},{key:"getCommentsAsString",value:function(){return this.commentLines.map(function(a){return B(a)}).join("\n")}},{key:"fillInSpaceTokens",value:function(a,b){var c=null;if(b){var d=b.indexOf(a[0]),e=b.indexOf(a[a.length-1]);c=b.slice(d,e+1)}return c}},{key:"convertTokensToString",value:function(a){return a?a.map(function(a){return a.value}).join(""):""}},{key:"resolveFunctionCall",value:function(a){var b=this.nonBuiltInFunctionCalls.shift();this.resolveFunctionCallInTree(this.expression,b,a)}},{key:"resolveFunctionCallInTree",value:function(a,b,c){if(c){var d=new Ya(c.clone());a.root===b?a.root=d:this.replaceFunctionCallSymbolWithVariable(a.root,b,d)}else{if(a.root!==b)throw new Error("There is no return value, but a return value was expected.");a.root=null}}},{key:"replaceFunctionCallSymbolWithVariable",value:function(a,b,c){var d=this;a.children.forEach(function(e,f){e===b?a.children[f]=c:d.replaceFunctionCallSymbolWithVariable(e,b,c)})}},{key:"execute",value:function(a){throw new Error("FlowchartNode's execute function should be overridden")}},{key:"getName",value:function(){throw new Error("FlowchartNode's getName function should be overridden")}},{key:"clone",value:function(a){var b=this.expression?this.expression.clone(a):this.expression,c=this._nodeSpecificClone(b,a);return c.addCommentLines(this.commentLines),c.indentationAmount=this.indentationAmount,c.portedLine=this.portedLine,c}},{key:"_nodeSpecificClone",value:function(a,b){throw new Error("FlowchartNode's _nodeSpecificClone function should be overridden")}},{key:"reset",value:function(){this.expression&&(this.expression=this.originalExpression.shallowCopy(),w(this.expression.root,this.nonBuiltInFunctionCalls))}},{key:"makePortedLine",value:function(a){this.portedLine||(this.portedLine=new xb,this._nodeSpecificPortedLine(a))}},{key:"_nodeSpecificPortedLine",value:function(a){throw new Error("FlowchartNode's _nodeSpecificPortedLine function should be overridden")}},{key:"makeAriaLabel",value:function(a){a.forZyFlowchartAuthoringTool,a.nodeToNumber;throw new Error("FlowchartNode's makeAriaLabel method should be overridden")}},{key:"addIndentationAmount",value:function(a){this.indentationAmount=a}},{key:"addToPortIndices",value:function(a){((arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||this.nonBuiltInFunctionCalls).forEach(function(b){return b.addToPortIndices(a)})}},{key:"portToken",value:function(a,b,c,d){var e=a.value,f=e.length-c.length,g=b.indexOf(a),h=b.slice(g),i=d.filter(function(a){return h.includes(a.firstToken)}),j=d.filter(function(a){return h.includes(a.lastToken)});i.forEach(function(a){a.portedStartIndexToHighlight-=f}),j.forEach(function(a){a.portedEndIndexToHighlight-=f})}},{key:"portExpression",value:function(a,b,c){var d=this,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,f=e||this.nonBuiltInFunctionCalls,g=c[0].startIndexInTheLine,h="";return this.addToPortIndices(-g,f),"C++"===a&&(h=c.map(function(a){var e=a.value,g=e,h={and:"&&",not:"!",or:"||"},i={SquareRoot:"sqrt",RaiseToPower:"pow",AbsoluteValue:"fabs"};switch(a.name){case"conditionalOperator":e in h&&(g=h[e]);break;case"openingBracket":g=".at(";break;case"closingBracket":g=")";break;case"word":e in i?g=i[e]:"size"===e&&b.root.memoryCellHasToken(a,c)&&(g="size()")}return d.portToken(a,c,g,f),g}).join("")),h}}]),a}(),$a=function(a){function b(a,d,f){e(this,b);var g=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d,f));return g.children.push(null),g}return d(b,a),H(b,[{key:"setChildNode",value:function(a){this.children[0]=a}},{key:"getChildNode",value:function(){return this.children[0]}},{key:"execute",value:function(a){return this._nodeSpecificExecution(a),this.getChildNode()}},{key:"_nodeSpecificExecution",value:function(a){throw new Error("SingleChildNode's _nodeSpecificExecution function should be overridden")}},{key:"makeAriaLabel",value:function(a){var b=a.nodeToNumber;return D({connectionsEnding:" "+b.get(this.children[0]),node:this,nodeToNumber:b})}}]),b}(Za),_a=function(a){function b(){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return d(b,a),b}($a),ab=function(a){function b(a,d,f,g,h){e(this,b);var i=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,d,g,h));return i.assignedTree=a,i.originalAssignedTree=a&&a.shallowCopy(),i.assignedTokens=i.fillInSpaceTokens(f,h&&h.allTokens),i.userAssignedExpression=i.convertTokensToString(i.assignedTokens),i.assignedTree&&w(i.assignedTree.root,i.nonBuiltInFunctionCalls),i}return d(b,a),H(b,[{key:"resolveFunctionCall",value:function(a){var b=this.nonBuiltInFunctionCalls.shift();x(b,this.assignedTree.root)?this.resolveFunctionCallInTree(this.assignedTree,b,a):this.resolveFunctionCallInTree(this.expression,b,a)}},{key:"_nodeSpecificExecution",value:function(a){var b=l(this.expression.root,a),c=l(this.assignedTree.root,a);"MemoryCell"!==c.getClassName()&&c.isArray()?b.copyMemoryCellValuesTo(c,!0):c.setValueDuringExecution(b.getValue(a.arrayOfVariables))}},{key:"getName",value:function(){return"AssignmentNode"}},{key:"_nodeSpecificClone",value:function(a,c){return new b(this.assignedTree.clone(c),a,this.assignedTokens.slice(),this.expressionTokens.slice(),this.line)}},{key:"reset",value:function(){G(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"reset",this).call(this),this.assignedTree&&(this.assignedTree=this.originalAssignedTree.shallowCopy(),w(this.assignedTree.root,this.nonBuiltInFunctionCalls))}},{key:"_nodeSpecificPortedLine",value:function(a){var b=this,c="";if("C++"===a){var d=this.nonBuiltInFunctionCalls.filter(function(a){return b.assignedTree.has(a)}),e=this.nonBuiltInFunctionCalls.filter(function(a){return b.expression.has(a)}),f=this.portExpression(a,this.assignedTree,this.assignedTokens,d),g=this.portExpression(a,this.expression,this.expressionTokens,e),h=f+" = ";this.addToPortIndices(h.length,e),c=""+h+g,this.line.isFromForLoop||(c+=";")}this.portedLine.line=c}}]),b}(_a),bb=function(a){function f(a,b,d){e(this,f);var g=c(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,a,b,d));return g.children.push(null,null),g.elseCommentLines=[],g}return d(f,a),H(f,[{key:"addElseCommentLines",value:function(a){var c;(c=this.elseCommentLines).push.apply(c,b(a))}},{key:"getCommentsAsString",value:function(){var a=this.commentLines.map(function(a){return B(a)}),b=this.elseCommentLines.map(function(a){return B(a)});return a[0]&&b[0]&&(a[0]=a[0].replace("//","// True:"),b[0]=b[0].replace("//","// False:")),a.concat(b).join("\n")}},{key:"setChildNodeForTrue",value:function(a){this.children[0]=a}},{key:"getChildNodeForTrue",value:function(){return this.children[0]}},{key:"setChildNodeForFalse",value:function(a){this.children[1]=a}},{key:"getChildNodeForFalse",value:function(){return this.children[1]}},{key:"execute",value:function(a){return l(this.expression.root,a).getValue()?this.getChildNodeForTrue():this.getChildNodeForFalse()}},{key:"makeAriaLabel",value:function(a){var b=a.nodeToNumber;return D({connectionsEnding:"s "+b.get(this.children[0])+" (condition is true) and "+b.get(this.children[1])+" (condition is false)",node:this,nodeToNumber:b})}}]),f}(Za),cb=function(a){function b(){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return d(b,a),H(b,[{key:"getName",value:function(){return"ElseIfNode"}},{key:"_nodeSpecificClone",value:function(a){return new b(a,this.expressionTokens.slice(),this.line)}},{key:"_nodeSpecificPortedLine",value:function(a){var b="";if("C++"===a){var c=this.portExpression(a,this.expression,this.expressionTokens),d="else if (";b=""+d+c+") {",this.addToPortIndices(d.length)}this.portedLine.line=b}}]),b}(bb),db=function(a){function b(){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return d(b,a),H(b,[{key:"execute",value:function(a){return null}},{key:"getName",value:function(){return"EndNode"}},{key:"_nodeSpecificClone",value:function(){return new b(null,null,this.line)}},{key:"_nodeSpecificPortedLine",value:function(){}},{key:"makeAriaLabel",value:function(a){return"Node "+a.nodeToNumber.get(this)+" is the end node."}}]),b}(Za),eb=function(a){function b(){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return d(b,a),H(b,[{key:"_nodeSpecificExecution",value:function(a){this.expression.root&&l(this.expression.root,a)}},{key:"getName",value:function(){return"FunctionCallNode"}},{key:"_nodeSpecificClone",value:function(a){return new b(a,this.expressionTokens.slice(),this.line)}},{key:"_nodeSpecificPortedLine",value:function(a){var b="";if("C++"===a){b=this.portExpression(a,this.expression,this.expressionTokens)+";"}this.portedLine.line=b}}]),b}(_a),fb=function(a){function b(){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return d(b,a),H(b,[{key:"getName",value:function(){return"IfNode"}},{key:"_nodeSpecificClone",value:function(a){var c=new b(a,this.expressionTokens.slice(),this.line);return c.addElseCommentLines(this.elseCommentLines),c}},{key:"_nodeSpecificPortedLine",value:function(a){var b="";if("C++"===a){var c=this.portExpression(a,this.expression,this.expressionTokens),d="if (";b=""+d+c+") {",this.addToPortIndices(d.length)}this.portedLine.line=b}}]),b}(bb),gb=function(a){function b(){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return d(b,a),H(b,[{key:"_nodeSpecificExecution",value:function(a){l(this.expression.root,a).setValueDuringExecution(a.input.getNextInput())}},{key:"getName",value:function(){return"InputNode"}},{key:"_nodeSpecificClone",value:function(a){return new b(a,this.expressionTokens.slice(),this.line)}},{key:"_nodeSpecificPortedLine",value:function(a){var b="";if("C++"===a){b="cin >> "+this.portExpression(a,this.expression,this.expressionTokens)+";"}this.portedLine.line=b}}]),b}($a),hb=function(a){function b(){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return d(b,a),H(b,[{key:"getName",value:function(){return"LoopNode"}},{key:"_nodeSpecificClone",value:function(a){return new b(a,this.expressionTokens.slice(),this.line)}},{key:"_nodeSpecificPortedLine",value:function(a){var b="";if("C++"===a&&(b=this.portExpression(a,this.expression,this.expressionTokens),!this.line.isFromForLoop)){var c="while (";b=""+c+b+") {",this.addToPortIndices(c.length)}this.portedLine.line=b}}]),b}(bb),ib=function(a){function b(a,d,f,g,h){e(this,b);var i=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d,f));return i.isString="string"===d[0].name,i.stringToOutput=i.isString?i.unescape(i.userExpression):null,i.precisionTree=g,i.precisionTokens=i.fillInSpaceTokens(h,f&&f.allTokens),i.precisionExpression=i.convertTokensToString(i.precisionTokens),i}return d(b,a),H(b,[{key:"_nodeSpecificExecution",value:function(a){var b=this.isString?this.stringToOutput:l(this.expression.root,a).toString();if(this.precisionTree){var c=l(this.precisionTree.root,a).getValue(),d=0,e=16;if(c<d||c>e)throw Error("Invalid number of decimal places given: "+c+". Valid range: "+d+"-"+e+".");b=Number.parseFloat(b).toFixed(c)}a.output.toPrint(b)}},{key:"getName",value:function(){return"OutputNode"}},{key:"_nodeSpecificClone",value:function(a,c){var d=this.precisionTree?this.precisionTree.clone(c):this.precisionTree;return new b(a,this.expressionTokens.slice(),this.line,d,this.precisionTokens.slice())}},{key:"unescape",value:function(a){for(var b=!1,c="",d=a.slice(1,-1),e=0;e<d.length;e++){var f=d[e];b?("n"===f?c+="\n":"t"===f?c+="\t":'"'===f?c+='"':"\\"===f&&(c+="\\"),b=!1):"\\"===f?b=!0:(c+=f,b=!1)}if(b)throw new Error("Unexpected extra backslash");return c}},{key:"_nodeSpecificPortedLine",value:function(a){var b="";if("C++"===a){var c="cout << ";b=""+c+this.portExpression(a,this.expression,this.expressionTokens)+";",this.addToPortIndices(c.length),this.precisionTokens.length&&(b+=" // Coral decimal place precision not converted to C++")}this.portedLine.line=b}},{key:"makeAriaLabel",value:function(a){var b=a.forZyFlowchartAuthoringTool,c=void 0!==b&&b,d=a.nodeToNumber,e=null;if(c&&this.isString){e="Node "+d.get(this)+" puts to output"+("\n"===this.stringToOutput?" a newline":": "+this.stringToOutput)}return D({codeOverride:e,connectionsEnding:" "+d.get(this.children[0]),node:this,nodeToNumber:d})}}]),b}($a),jb=function(a){function b(){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return d(b,a),H(b,[{key:"_nodeSpecificExecution",value:function(){}},{key:"getName",value:function(){return"StartNode"}},{key:"_nodeSpecificClone",value:function(){return new b}},{key:"_nodeSpecificPortedLine",value:function(){}},{key:"makeAriaLabel",value:function(a){var b=a.nodeToNumber;return"Node "+b.get(this)+" is the start node and points to node "+b.get(this.children[0])+"."}}]),b}($a),kb=function(){function a(){e(this,a)}return H(a,[{key:"getName",value:function(){throw new Error("RenderingIndicator's getName function should be overridden")}},{key:"getColumn",value:function(a){throw new Error("RenderingIndicator's getColumn function should be overridden")}}]),a}(),lb=function(a){function b(a){e(this,b);var d=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d.ifElseIfNode=a,d}return d(b,a),H(b,[{key:"getColumn",value:function(a){var b=this;return a.find(function(a){return a.node===b.ifElseIfNode}).column}}]),b}(kb),mb=function(a){function b(a,d){e(this,b);var f=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return f.loopNode=a,f.nodeBeforeLoopNode=d,f}return d(b,a),H(b,[{key:"getName",value:function(){return"BackToLoopRenderingIndicator"}},{key:"getColumn",value:function(a){var b=this;return a.filter(function(a){return"NodeRenderingIndicator"===a.getName()}).find(function(a){return a.node===b.loopNode}).column}}]),b}(kb),nb=function(){function a(b){e(this,a),this.node=b,this.count=1}return H(a,[{key:"clone",value:function(){var b=new a(this.node);return b.count=this.count,b}}]),a}(),ob=function a(b){e(this,a),this.node=b,this.distance=0},pb=function(a){function b(){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return d(b,a),H(b,[{key:"getName",value:function(){return"MergeFalseRenderingIndicator"}}]),b}(lb),qb=function a(b,c){e(this,a),this.ifElseIfNode=b,this.mergeNode=c},rb=function(a){function b(a,d,f){e(this,b);var g=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,f));return g.row=a,g.column=d,g}return d(b,a),H(b,[{key:"getName",value:function(){return"MergeTrueRenderingIndicator"}}]),b}(lb),sb=function(a){function b(a,d,f){e(this,b);var g=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return g.row=a,g.column=d,g.node=f,g}return d(b,a),H(b,[{key:"getName",value:function(){return"NodeRenderingIndicator"}},{key:"getColumn",value:function(){return this.column}}]),b}(kb),tb=function(){function a(){e(this,a)}return H(a,[{key:"make",value:function(a){var b=[],c=this.findIfElseMergeNodePairs(a.startNode);return this.createRenderListRunner(a.startNode,0,0,c,[],b),this.moveMergeTrueIndicatorColumnsIntoPosition(b),b}},{key:"findIfElseMergeNodePairs",value:function(a){var b=[];return this.findIfElseMergeNodePairsRunner(a,b,[],[]),b}},{key:"findIfElseMergeNodePairsRunner",value:function(a,c,d){var e=this,f=[];if(a){var g=d.find(function(b){return b.node===a}),h=!1;if(g)"LoopNode"===g.node.getName()&&1===g.count&&(h=!0,g.count++);else{h=!0,d.push(new nb(a));var i=a.children.map(function(a){return e.findIfElseMergeNodePairsRunner(a,c,d.map(function(a){return a.clone()}))});if(1===i.length)f.push.apply(f,b(i[0]));else if(2===i.length){var j=this.searchForMergeNodeInDescendants(i);j&&c.push(new qb(a,j)),f.push.apply(f,b(this.combineDescendants(i)))}}h&&(f.unshift(new ob(a)),f.forEach(function(a){return a.distance++}))}return f}},{key:"combineDescendants",value:function(a){var b=this.keepDescendantsWithSmallestDistance(a[0],a[1]),c=this.keepDescendantsWithSmallestDistance(a[1],a[0],!0);return b.concat(c)}},{key:"keepDescendantsWithSmallestDistance",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a.filter(function(a){var d=b.find(function(b){return a.node===b.node}),e=!0;return d&&(e=c?a.distance<d.distance:a.distance<=d.distance),e})}},{key:"searchForMergeNodeInDescendants",value:function(a){a.forEach(function(a){return a.sort(function(a,b){return a.distance-b.distance})});var b=1/0,c=null;return a[0].forEach(function(d){a[1].forEach(function(a){if(d.node===a.node){var e=Math.min(d.distance,a.distance);e<b&&(b=e,c=d.node)}})}),c}},{key:"createRenderListRunner",value:function(a,b,c,d,e,f){var g=b,h=e[e.length-1];return d.some(function(b){return b.mergeNode===a&&b.ifElseIfNode===h})?g-=1:a===h?g-=1:g=this.handleRenderListNode(a,g,c,d,e,f),g}},{key:"handleRenderListNode",value:function(a,c,d,e,f,g){var h=c;switch(g.push(new sb(h,d,a)),a.getName()){case"AssignmentNode":case"FunctionCallNode":case"InputNode":case"OutputNode":case"StartNode":h=this.createRenderListRunner(a.getChildNode(),h+1,d,e,f,g);break;case"LoopNode":f.push(a),h=this.createRenderListRunner(a.getChildNodeForTrue(),h,d+1,e,f,g),f.pop(),h=Math.max(h,c),"MergeFalseRenderingIndicator"===g[g.length-1].getName()&&(h+=1);var i=g.filter(function(a){return"NodeRenderingIndicator"===a.getName()}),j=i[i.length-1];g.push(new mb(a,j.node)),h=this.createRenderListRunner(a.getChildNodeForFalse(),h+1,d,e,f,g);break;case"IfNode":case"ElseIfNode":f.push(a),h=this.createRenderListRunner(a.getChildNodeForTrue(),h,d+1,e,f,g),h=Math.max(h,c),this.isPreviousIndicatorBackToLoopOrMergeFalseWithPreviousofNode(g)&&(h+=1),g.push(new rb(h,d,a));var k=a.getChildNodeForFalse(),l="ElseIfNode"===k.getName(),m=l?0:1;h=this.createRenderListRunner(k,h+1,d+m,e,f,g);var n="BackToLoopRenderingIndicator"===g[g.length-1].getName(),o=n&&"MergeFalseRenderingIndicator"===g[g.length-2].getName();g.push(new pb(a)),f.pop();var p=e.find(function(b){return b.ifElseIfNode===a}).mergeNode,q=g.some(function(a){return a.node===p}),r=f.some(function(a){return e.some(function(b){return b.ifElseIfNode===a&&b.mergeNode===p})});if(q||r)this.isPreviousIndicatorBackToLoopOrMergeFalseWithPreviousofNode(g)&&(h+=1);else{var s=g.filter(function(a){return a.row}).map(function(a){return a.row}),t=Math.max.apply(Math,b(s));n&&(t+=1,o&&(t+=1)),h=this.handleRenderListNode(p,t+2,d,e,f,g)}}return h}},{key:"isPreviousIndicatorBackToLoopOrMergeFalseWithPreviousofNode",value:function(a){var b=a[a.length-1].getName(),c="BackToLoopRenderingIndicator"===b,d="MergeFalseRenderingIndicator"===b,e=a[a.length-2].getName(),f="NodeRenderingIndicator"===e;return c||d&&!f}},{key:"moveMergeTrueIndicatorColumnsIntoPosition",value:function(a){var b=this,c=[];a.forEach(function(d){var e=0;switch(d.getName()){case"NodeRenderingIndicator":b.isNodeIfOrElseIf(d.node)&&c.push(0),e=d.column;break;case"MergeFalseRenderingIndicator":var f=a.filter(function(a){return"MergeTrueRenderingIndicator"===a.getName()}).find(function(a){return a.ifElseIfNode===d.ifElseIfNode}),g=c.pop();"IfNode"===f.ifElseIfNode.getName()&&g++,e=f.column=g}c.forEach(function(a,b){c[b]=Math.max(a,e)})});var d=[];a.forEach(function(a){switch(a.getName()){case"MergeTrueRenderingIndicator":"IfNode"===a.ifElseIfNode.getName()?d.push(a.column):"ElseIfNode"===a.ifElseIfNode.getName()&&(a.column=d[d.length-1]);break;case"MergeFalseRenderingIndicator":"IfNode"===a.ifElseIfNode.getName()&&d.pop()}})}},{key:"isNodeIfOrElseIf",value:function(a){return-1!==["IfNode","ElseIfNode"].indexOf(a.getName())}}]),a}(),ub=function a(b,c,d){e(this,a),this.name=b,this.value=c,this.startIndexInTheLine=d,this.endIndexInTheLine=d+c.length-1},vb=function a(b,c){e(this,a),this.name=b,this.expression=c},wb=function(){function a(){e(this,a)}return H(a,[{key:"tokenize",value:function(a){var b=this;return a.split(/\r\n|\r|\n/).map(function(a,c){return b.tokenizeLine(a,c)})}},{key:"tokenizeLine",value:function(a,b){var c=b+1,d=new xb(a,c),e=new vb("indent",/^\s+/),f=this.attemptToMatchTokenToLine(e,a,d,a),g=f.tmpLine;for(f.hasAddedToken;g.length>0;)for(var h=0;h<Ab.length;++h){var i=this.attemptToMatchTokenToLine(Ab[h],g,d,a);if(g=i.tmpLine,i.hasAddedToken)break;if(h+1===Ab.length)throw new Error("Unrecognized token near: "+g+" (line "+c+")")}return d}},{key:"attemptToMatchTokenToLine",value:function(a,b,c,d){var e=b,f=e.match(a.expression),g=Boolean(f);if(f){var h=f[0],i=new ub(a.name,h,d.length-b.length);c.push(i),e=e.slice(f.index+h.length)}return{tmpLine:e,hasAddedToken:g}}}]),a}(),xb=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e(this,a),this.line=b,this.lineNumber=c,this.tokens=[],this.allTokens=[],this.blankLinesAbove=[],this.startIndexOfSegment=d||0,this.endIndexOfSegment=f||Math.max(b.length-1,0),this.isFromForLoop=!1}return H(a,[{key:"push",value:function(){var a,b;(a=this.tokens).push.apply(a,arguments),(b=this.allTokens).push.apply(b,arguments)}},{key:"pushBlankLines",value:function(a){var c;(c=this.blankLinesAbove).push.apply(c,b(a))}},{key:"removeSpaces",value:function(){this.tokens=this.tokens.filter(function(a){return"spaces"!==a.name})}}]),a}(),yb=/^[+\-*/%]/,zb=/^(>=|<=|>|<|==|!=|not|and|or)/,Ab=[new vb("comment",/^\/\/.*$/),new vb("dataType",/^(float\s+array|integer\s+array|float|integer|nothing)(?!\w+)/),new vb("arithmeticOperator",yb),new vb("conditionalOperator",zb),new vb("floatNumber",/^\d+\.\d+/),new vb("integerNumber",/^\d+/),new vb("string",/^"[^"\\]*(\\.[^"\\]*)*"/),new vb("questionMark",/^\?/),new vb("assignment",/^=/),new vb("openingParens",/^\(/),new vb("closingParens",/^\)/),new vb("openingBracket",/^\[/),new vb("closingBracket",/^\]/),new vb("comma",/^,/),new vb("period",/^\./),new vb("semicolon",/^\;/),new vb("spaces",/^\s+/),new vb("word",/^\w+/)],Bb=function(){function a(b,c){e(this,a),this.name=b,this.type=c,this.value=0,this.arrayListenerCallback=null,this.wasWrittenTo=!1}return H(a,[{key:"getClassName",value:function(){return"MemoryCell"}},{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(a){var b=a;if("integer"===this.type&&"?"!==b&&(b=Math.trunc(b),this.name!==Ea)){var c=-2147483648,d=" of "+this.name+" when assigned "+b;if(b>2147483647)throw new Error("Overflow"+d);if(b<c)throw new Error("Underflow"+d)}this.arrayListenerCallback&&this.arrayListenerCallback(b),this.value=b}},{key:"setValueDuringExecution",value:function(a){if("?"===a)throw new Error("Cannot assign variable with question mark");this.wasWrittenTo=!0,this.setValue(a)}},{key:"clearWrittenTo",value:function(){this.wasWrittenTo=!1}},{key:"toString",value:function(){var a=this.value.toString();return"float"===this.type&&-1===a.indexOf(".")&&(a=this.value.toFixed(1)),a}},{key:"clone",value:function(){var b=new a(this.name,this.type);return b.value=this.value,b.arrayListenerCallback=this.arrayListenerCallback,b.wasWrittenTo=this.wasWrittenTo,b}}]),a}(),Cb=function(){function a(){e(this,a),this.name=""}return H(a,[{key:"setName",value:function(a){if(!t(a))throw new Error("Invalid variable name");this.name=a}},{key:"isArray",value:function(){return!1}},{key:"getClassName",value:function(){throw new Error("Variable's getClassName function should be overridden")}},{key:"clone",value:function(){throw new Error("Variable's clone function should be overridden")}},{key:"getPortedDataType",value:function(a){throw new Error("Variable's getPortedDataType function should be overridden")}}]),a}(),Db=function(a){function b(a,d){e(this,b);var f=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return f.cell=new Bb(a,d),f.setName(a),f}return d(b,a),H(b,[{key:"setName",value:function(a){G(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"setName",this).call(this,a),this.cell.name=a}},{key:"setValue",value:function(a){this.cell.setValue(a)}},{key:"getValue",value:function(){return this.cell.getValue()}},{key:"toString",value:function(){return this.cell.toString()}},{key:"setValueDuringExecution",value:function(a){this.cell.setValueDuringExecution(a)}},{key:"clearWrittenTo",value:function(){this.cell.clearWrittenTo()}}]),b}(Cb),Eb=function(a){function b(a,d,f){e(this,b);var g=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return g.type=f,g.sizeCell=new Bb("","integer"),g.arrayCells=[],g.setName(a),g.sizeCell.setValue(d),g.setNumberOfElements(d),"?"!==d&&(g.sizeCell.hasEverBeenWrittenTo=!0),g.sizeCell.arrayListenerCallback=function(a){if("?"!==g.sizeCell.getValue())throw new Error("Cannot change size of array that already has a set size");g.setNumberOfElements(a)},g}return d(b,a),H(b,[{key:"setNumberOfElements",value:function(a){var b=this,c=Number.isInteger(parseInt(a,10)),d="?"===a;if(!c&&!d)throw new Error("Array size must be an integer or question mark");var e=this.arrayCells.length,f=d?0:a,g=f-e;g>0?require("utilities").createArrayOfSizeN(g).forEach(function(a,c){b.arrayCells.push(new Bb(b.name+"["+(e+c)+"]",b.type))}):this.arrayCells.length=0}},{key:"setName",value:function(a){G(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"setName",this).call(this,a),this.sizeCell.name=a+".size",this.arrayCells.forEach(function(b,c){b.name=a+"["+c+"]"})}},{key:"getMemoryCellByName",value:function(a){return this.sizeCell.name===a?this.sizeCell:this.arrayCells.find(function(b){return b.name===a})}},{key:"isArray",value:function(){return!0}},{key:"copyMemoryCellValuesTo",value:function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(c){var e=this.sizeCell.getValue(),f=a.sizeCell.getValue();if("?"===e){var g=d?"An array in a function argument cannot have size of ?.":"Array on right-hand side has size of ?. Cannot assign with an array that has a size of ?.";throw new Error(g)}if("?"===f)a.sizeCell.setValueDuringExecution(e);else if(f!==e){var h=d?"Array in argument list and parameter array":"Array on left and array on right-hand side";throw new Error(h+" have different sizes, but shouldn't.")}}a.arrayCells.forEach(function(a,d){var e=b.arrayCells[d];c?a.setValueDuringExecution(e.getValue()):a.setValue(e.getValue())})}},{key:"clearWrittenTo",value:function(){this.sizeCell.clearWrittenTo(),this.arrayCells.forEach(function(a){return a.clearWrittenTo()})}}]),b}(Cb),Fb=function(a){function b(a){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,"boolean"))}return d(b,a),H(b,[{key:"getClassName",value:function(){return"BooleanVariable"}},{key:"clone",value:function(){var a=new b(this.name);return a.setValue(this.getValue()),a}}]),b}(Db),Gb=function(a){function b(a,d){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d,"float"))}return d(b,a),H(b,[{key:"getClassName",value:function(){return"FloatArray"}},{key:"clone",value:function(){var a=new b(this.name,this.sizeCell.getValue());return this.copyMemoryCellValuesTo(a),a}},{key:"getPortedDataType",value:function(){return"vector<double>"}}]),b}(Eb),Hb=function(a){function b(a){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,"float"))}return d(b,a),H(b,[{key:"getClassName",value:function(){return"FloatVariable"}},{key:"clone",value:function(){var a=new b(this.name);return a.setValue(this.getValue()),a}},{key:"getPortedDataType",value:function(){return"double"}}]),b}(Db),Ib=function(a){function b(a,d){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d,"integer"))}return d(b,a),H(b,[{key:"getClassName",value:function(){return"IntegerArray"}},{key:"clone",value:function(){var a=new b(this.name,this.sizeCell.getValue());return this.copyMemoryCellValuesTo(a),a}},{key:"getPortedDataType",value:function(){return"vector<int>"}}]),b}(Eb),Jb=function(a){function b(a){return e(this,b),c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,"integer"))}return d(b,a),H(b,[{key:"getClassName",value:function(){return"IntegerVariable"}},{key:"clone",value:function(){var a=new b(this.name);return a.setValue(this.getValue()),a}},{key:"getPortedDataType",value:function(){return"int"}}]),b}(Db),Kb=function(a){function b(a){e(this,b);var d=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d.name=a,d.getMemoryCell=function(a){var b=null;return d.forEach(function(c){-1===["IntegerArray","FloatArray"].indexOf(c.getClassName())?c.name===a&&(b=c.cell):b=c.getMemoryCellByName(a)||b}),b},d.getVariable=function(a){return d.find(function(b){return b.name===a})},d.getVariableNames=function(){return d.map(function(a){return a.name})},d.clone=function(){var a=new b(d.name);return d.forEach(function(b){return a.push(b.clone())}),a},d.clearWrittenTo=function(){d.forEach(function(a){return a.clearWrittenTo()})},d.hasArray=function(){return d.some(function(a){return a.isArray()})},d}return d(b,a),b}(Array),Lb=function a(b,c){e(this,a),this.name=b.name,this.value=b.toString(),this.isArray=c,this.wasWrittenTo=b.wasWrittenTo},Mb=function(a){function b(a,d){var f=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e(this,b);var g=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,!0));return g.isFirstOfArray=f,g.name=g.name.substring(d.length),g}return d(b,a),b}(Lb),Nb=function a(b){e(this,a),this.isArraySizeComment=!0,this.comment=b},Ob=function(a){function b(a){e(this,b);var d=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a.sizeCell,a.name,!0));return d.arrayName=a.name,d.type=a.type,d.numberOfElements=Math.max(2,a.arrayCells.length+1),d}return d(b,a),b}(Mb),Pb=function(a){function b(a){e(this,b);var d=c(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,!1));return d.type=a.type,d}return d(b,a),b}(Lb),Qb=new jb,Rb=new db;Qb.setChildNode(Rb);var Sb=new Ia(Qb),Tb=new Kb("Parameters"),Ub=new Kb("Return");Tb.push(new Hb("x"),new Hb("y")),Ub.push(new Hb("z"));var Vb=new za("RaiseToPower",Sb.clone(),new Kb("Locals"),Tb,Ub,function(a,b){var c=a.getMemoryCell("x").getValue(),d=a.getMemoryCell("y").getValue(),e=Math.pow(c,d);b.getMemoryCell("z").setValue(e)}),Wb=new Kb("Parameters"),Xb=new Kb("Return");Wb.push(new Hb("x")),Xb.push(new Hb("y"));var Yb=new za("SquareRoot",Sb.clone(),new Kb("Locals"),Wb,Xb,function(a,b){var c=Math.sqrt(a.getMemoryCell("x").getValue());b.getMemoryCell("y").setValue(c)}),Zb=new Kb("Parameters"),$b=new Kb("Return");Zb.push(new Jb("x"),new Jb("y")),$b.push(new Jb("z"));var _b=new za("RandomNumber",Sb.clone(),new Kb("Locals"),Zb,$b,function(a,b,c){var d=c.randomizer.getNumber(),e=a.getMemoryCell("x").getValue(),f=a.getMemoryCell("y").getValue()-e+1;if(f<=0)throw new Error("RandomNumber cannot have second parameter smaller than first parameter");var g=d%f+e;b.getMemoryCell("z").setValue(g)}),ac=new Kb("Parameters");ac.push(new Jb("x"));var bc=new za("SeedRandomNumbers",Sb.clone(),new Kb("Locals"),ac,new Kb("Return"),function(a,b,c){c.randomizer.setSeed(a.getMemoryCell("x").getValue())}),cc=new Kb("Parameters"),dc=new Kb("Return");cc.push(new Hb("x")),dc.push(new Hb("y"));var ec=new za("AbsoluteValue",Sb.clone(),new Kb("Locals"),cc,dc,function(a,b){var c=Math.abs(a.getMemoryCell("x").getValue());b.getMemoryCell("y").setValue(c)}),fc=[ec,Vb,Yb],gc=[_b,bc],hc=fc.concat(gc),ic=fc.map(function(a){return a.name}),jc=gc.map(function(a){return a.name}),kc=hc.map(function(a){return a.name}),lc={spaceBetweenColumns:23,spaceBetweenRows:15,templates:null},mc="evaluatorGeneratedVariable",nc=["Get","next","input","Put","to","output","with","decimal","places","or","and","not","returns","Function","while","if","else","for","elseif","float","integer","array","nothing"],oc={Get:"Get is used to construct an input statement. Get must assign to a variable. Ex: variable = Get next input",next:"next is used to construct an input statement. Ex: variable = Get next input",input:"input is used to construct an input statement. Ex: variable = Get next input",Put:"Put is used to construct an output statement. Ex: Put item to output",to:"to is used to construct an output statement. Ex: Put item to output",output:"output is used to construct an output statement. Ex: Put item to output",with:"with is used to construct an output statement. Ex: Put item to output with 2 decimal places",decimal:"decimal is used to construct an output statement. Ex: Put item to output with 2 decimal places",places:"places is used to construct an output statement. Ex: Put item to output with 2 decimal places",returns:"returns is used as part of a function definition. Ex: Function foo() returns integer",Function:"Function is used to begin a function definition. Ex: Function foo() returns integer",while:"while is used to begin a while loop's expression. Ex: while x > 3",if:"if is used in branches. Ex: if item > 3",else:"else is used in if-else branches.\nEx:\nif item > 3\n   ...\nelse\n   ...",for:"for is used to begin a for loop. Ex: for i = 0; i < 3; i = i + 1",elseif:"elseif is used in if-elseif branches.\nEx:\nif item > 9\n   ...\nelseif item > 4\n   ...",float:"float is used as part of a variable declaration. Ex: float a",integer:"integer is used as part of a variable declaration. Ex: integer a",array:"array is used to declare an array variable. Ex: integer array(4) userVals",nothing:"nothing is used as part of a function definition. Ex: Function foo() returns nothing"},pc={int:"integer",double:"float",void:"nothing"},qc=Object.assign({},pc,{print:"Put",cout:"Put",printf:"Put",println:"Put",def:"Function",function:"Function",return:"returns"}),rc=function(){function a(){e(this,a),this.zyFlowchartSDK=this.zyFlowchartSDK||{},this.zyFlowchartSDK.executor=Handlebars.template({1:function(a,b,c,d,e){return" use-border"},3:function(a,b,c,d,e){var f;return"            <div id='"+a.escapeExpression((f=null!=(f=c.segmentedFunctionControlId||(null!=b?b.segmentedFunctionControlId:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"segmentedFunctionControlId",hash:{},data:e}):f))+"' class='segmented-function-control'></div>\n"},5:function(a,b,c,d,e){return"            <div class='function-container'></div>\n"},7:function(a,b,c,d,e){var f;return"        <div id='"+a.escapeExpression((f=null!=(f=c.segmentedLanguageControlId||(null!=b?b.segmentedLanguageControlId:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"segmentedLanguageControlId",hash:{},data:e}):f))+"' class='segmented-language-control'></div>\n"},9:function(a,b,c,d,e){return"'error-message'"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:a.nullContext||{};return"<div class='flowchart-program-container'>\n    <div class='flowchart-program"+(null!=(f=c.if.call(h,null!=b?b.isUsingMultipleLanguages:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+"'>\n"+(null!=(f=c.if.call(h,null!=(f=null!=b?b.functions:b)?f.length:f,{name:"if",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+"\n"+(null!=(f=c.each.call(h,null!=b?b.functions:b,{name:"each",hash:{},fn:a.program(5,e,0),inverse:a.noop,data:e}))?f:"")+"    </div>\n"+(null!=(f=c.if.call(h,null!=b?b.isUsingMultipleLanguages:b,{name:"if",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+"    <div aria-live='polite' class="+(null!=(f=c.if.call(h,null!=b?b.errorMessage:b,{name:"if",hash:{},fn:a.program(9,e,0),inverse:a.noop,data:e}))?f:"")+">"+a.escapeExpression((g=null!=(g=c.errorMessage||(null!=b?b.errorMessage:b))?g:c.helperMissing,"function"==typeof g?g.call(h,{name:"errorMessage",hash:{},data:e}):g))+"</div>\n</div>"},useData:!0}),this.zyFlowchartSDK.flowchart=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return"<div class='flowchart-canvas zb-scrollbar'></div>"},useData:!0}),this.zyFlowchartSDK.function=Handlebars.template({1:function(a,b,c,d,e){var f;return"            <div class='function-name'>"+a.escapeExpression((f=null!=(f=c.functionName||(null!=b?b.functionName:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"functionName",hash:{},data:e}):f))+"</div>\n"},3:function(a,b,c,d,e){return"code-container"},5:function(a,b,c,d,e){return"flowchart-container"},7:function(a,b,c,d,e){return"                <div class='parameter-variables-container'></div>\n                <div class='local-variables-container'></div>\n                <div class='return-variable-container'></div>\n"},9:function(a,b,c,d,e){var f;return"                <div class='variable-or-IO-label'>\n                    <p>Variables</p>\n                    <em>"+(null!=(f=c.if.call(null!=b?b:a.nullContext||{},null!=b?b.showVariablesNotShownMessage:b,{name:"if",hash:{},fn:a.program(10,e,0),inverse:a.program(12,e,0),data:e}))?f:"")+"</em>\n                </div>\n"},10:function(a,b,c,d,e){return"Not shown when editing"},12:function(a,b,c,d,e){return"None"},14:function(a,b,c,d,e){return"            <div class='input-output-container'>\n                <div class='input-container'></div>\n                <div class='output-container'></div>\n            </div>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{};return"<div class='program-function'>\n    <div>\n"+(null!=(f=c.if.call(g,null!=b?b.showFunctionName:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+"        <div class='function-container "+(null!=(f=c.if.call(g,null!=b?b.isCodeCurrentlyShown:b,{name:"if",hash:{},fn:a.program(3,e,0),inverse:a.program(5,e,0),data:e}))?f:"")+"'></div>\n    </div>\n    <div class='variables-and-IO-container'>\n        <div class='function-variables-container'>\n"+(null!=(f=c.if.call(g,null!=b?b.hasVariables:b,{name:"if",hash:{},fn:a.program(7,e,0),inverse:a.program(9,e,0),data:e}))?f:"")+"        </div>\n"+(null!=(f=c.if.call(g,null!=b?b.hasInputOrOutput:b,{name:"if",hash:{},fn:a.program(14,e,0),inverse:a.noop,data:e}))?f:"")+"    </div>\n</div>\n"},useData:!0}),this.zyFlowchartSDK.input=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return"<div class='variable-or-IO-label'>Input</div>\n<div class='numerical-input' aria-label='Program input' contenteditable='"+a.escapeExpression((f=null!=(f=c.isEditable||(null!=b?b.isEditable:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"isEditable",hash:{},data:e}):f))+"'></div>"},useData:!0}),this.zyFlowchartSDK.output=Handlebars.template({1:function(a,b,c,d,e){return"        <div class='textarea-console-container'>\n            <textarea class='console' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false'></textarea>\n        </div>\n"},3:function(a,b,c,d,e){return"        <div class='console'><pre class='numerical-output'></pre></div>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return"<div class='variable-or-IO-label'>Output</div>\n<div aria-live='polite' aria-label='Program output'>\n"+(null!=(f=c.if.call(null!=b?b:a.nullContext||{},null!=b?b.isEditable:b,{name:"if",hash:{},fn:a.program(1,e,0),inverse:a.program(3,e,0),data:e}))?f:"")+"</div>"},useData:!0}),this.zyFlowchartSDK.pseudocode=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f;return"<div id='"+a.escapeExpression((f=null!=(f=c.codeEditorID||(null!=b?b.codeEditorID:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"codeEditorID",hash:{},data:e}):f))+"'></div>"},useData:!0}),this.zyFlowchartSDK.variables=Handlebars.template({1:function(a,b,c,d,e){return" no-arrays"},3:function(a,b,c,d,e){var f;return"            <tr>\n"+(null!=(f=c.if.call(null!=b?b:a.nullContext||{},null!=b?b.isArraySizeComment:b,{name:"if",hash:{},fn:a.program(4,e,0),inverse:a.program(6,e,0),data:e}))?f:"")+"            </tr>\n"},4:function(a,b,c,d,e){var f;return"                    <td class='variable-size-comment'><span>"+a.escapeExpression((f=null!=(f=c.comment||(null!=b?b.comment:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"comment",hash:{},data:e}):f))+"</span></td>\n                    <td></td>\n"},6:function(a,b,c,d,e){var f,g,h=null!=b?b:a.nullContext||{},i=c.helperMissing,j="function",k=a.escapeExpression;return"                    <td aria-live='polite' aria-label='variable value' class='variable-value"+(null!=(f=c.if.call(h,null!=b?b.wasWrittenTo:b,{name:"if",hash:{},fn:a.program(7,e,0),inverse:a.noop,data:e}))?f:"")+"'>"+k((g=null!=(g=c.value||(null!=b?b.value:b))?g:i,(void 0===g?"undefined":F(g))===j?g.call(h,{name:"value",hash:{},data:e}):g))+"</td>\n                    <td aria-live='polite' aria-label='variable name' class='variable-name'>"+k((g=null!=(g=c.name||(null!=b?b.name:b))?g:i,(void 0===g?"undefined":F(g))===j?g.call(h,{name:"name",hash:{},data:e}):g))+"</td>\n"+(null!=(f=c.if.call(h,null!=b?b.isArray:b,{name:"if",hash:{},fn:a.program(9,e,0),inverse:a.program(12,e,0),data:e}))?f:"")},7:function(a,b,c,d,e){return" highlight-value"},9:function(a,b,c,d,e){var f;return null!=(f=c.if.call(null!=b?b:a.nullContext||{},null!=b?b.isFirstOfArray:b,{name:"if",hash:{},fn:a.program(10,e,0),inverse:a.noop,data:e}))?f:""},10:function(a,b,c,d,e){var f,g=null!=b?b:a.nullContext||{},h=c.helperMissing,i="function",j=a.escapeExpression;return"                            <td aria-label='array name and type' class='variable-type-container array-divider' rowspan='"+j((f=null!=(f=c.numberOfElements||(null!=b?b.numberOfElements:b))?f:h,(void 0===f?"undefined":F(f))===i?f.call(g,{name:"numberOfElements",hash:{},data:e}):f))+"'>\n                                <span class='array-name'>"+j((f=null!=(f=c.arrayName||(null!=b?b.arrayName:b))?f:h,(void 0===f?"undefined":F(f))===i?f.call(g,{name:"arrayName",hash:{},data:e}):f))+"</span>\n                                <br>\n                                <span class='variable-type'>"+j((f=null!=(f=c.type||(null!=b?b.type:b))?f:h,(void 0===f?"undefined":F(f))===i?f.call(g,{name:"type",hash:{},data:e}):f))+" array</span>\n                            </td>\n"},12:function(a,b,c,d,e){var f;return"                        <td aria-label='variable type' class='variable-type-container variable-type'>"+a.escapeExpression((f=null!=(f=c.type||(null!=b?b.type:b))?f:c.helperMissing,"function"==typeof f?f.call(null!=b?b:a.nullContext||{},{name:"type",hash:{},data:e}):f))+"</td>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g,h=null!=b?b:a.nullContext||{};return"<div class='variables-container"+(null!=(f=c.unless.call(h,null!=b?b.hasArray:b,{name:"unless",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+"'>\n    <div class='variable-or-IO-label'>"+a.escapeExpression((g=null!=(g=c.variablesName||(null!=b?b.variablesName:b))?g:c.helperMissing,"function"==typeof g?g.call(h,{name:"variablesName",hash:{},data:e}):g))+"</div>\n    <table>\n"+(null!=(f=c.each.call(h,null!=b?b.variableRenderList:b,{name:"each",hash:{},fn:a.program(3,e,0),inverse:a.noop,data:e}))?f:"")+"    </table>\n</div>"},useData:!0}),lc.templates=this.zyFlowchartSDK,this.css='<style>.zyante-bold{font-family:HelveticaNeue-Light,"Helvetica Neue Light","Helvetica Neue",Helvetica,Arial,"Lucida Grande",sans-serif;font-weight:300}.zyante-section-bold{font-family:Helvetica;font-weight:300}.zyFlowchartSDK div.flowchart-canvas{overflow:auto;padding:1px}.zyFlowchartSDK div.flowchart-canvas svg{display:block;padding:2px}.zyFlowchartSDK div.flowchart-canvas svg text{white-space:pre}.zyFlowchartSDK div.flowchart-canvas svg text.edge-label{font-variant:small-caps}.zyFlowchartSDK div.variables-container{overflow-x:auto}.zyFlowchartSDK div.variables-container td:first-child{text-align:center;width:80px}.zyFlowchartSDK div.variables-container:not(.no-arrays) td.variable-type-container{border-left:3px solid transparent;padding-left:8px}.zyFlowchartSDK div.variables-container:not(.no-arrays) td.variable-type-container.array-divider{border-left-color:#6685a8}.zyFlowchartSDK div.variables-container td.variable-value{border:2px solid #d98550;background-color:#f4d9bf}.zyFlowchartSDK div.variables-container td.variable-value.highlight-value{background-color:#efefef}.zyFlowchartSDK div.variables-container td.variable-name{padding:0 8px}.zyFlowchartSDK div.variables-container td.variable-size-comment{color:#ccc}.zyFlowchartSDK div.variables-container td.variable-size-comment span{position:relative;top:-1px}.zyFlowchartSDK div.variables-container .variable-type{color:#ccc}.zyFlowchartSDK div.variables-container span.array-name{color:#6685a8}.zyFlowchartSDK div.program-function{display:flex;flex-direction:row}.zyFlowchartSDK div.program-function div.function-name{color:#5780a6;margin-bottom:5px;text-align:center}.zyFlowchartSDK div.program-function div.flowchart-container{display:flex;padding:1px}.zyFlowchartSDK div.program-function div.code-container{border:1px solid #ccc;min-height:300px;text-align:left}.zyFlowchartSDK div.program-function div.code-container.disabled{opacity:.75;pointer-events:none}.zyFlowchartSDK div.program-function div.code-container.disabled .ace_editor{background-color:#eee}.zyFlowchartSDK div.program-function div.code-container div.ace_editor{height:100%}.zyFlowchartSDK div.program-function div.code-container div.ace_editor .ace_gutter{border-right:1px solid #ccc}.zyFlowchartSDK div.program-function div.code-container div.ace_editor .ace_breakpoint{background:#cbd8e4;border-radius:0 20px 20px 0;box-shadow:0 0 1px 1px #5780a6 inset}.zyFlowchartSDK div.program-function div.code-container textarea{font-family:monospace;height:100%;resize:none;width:100%}.zyFlowchartSDK div.program-function div.variables-and-IO-container{margin-left:15px}.zyFlowchartSDK div.program-function div.variables-and-IO-container div.function-variables-container,.zyFlowchartSDK div.program-function div.variables-and-IO-container div.input-output-container{padding-left:15px}.zyFlowchartSDK div.program-function div.variables-and-IO-container div.function-variables-container>div:not(:empty),.zyFlowchartSDK div.program-function div.variables-and-IO-container div.input-output-container>div:not(:empty){margin-bottom:15px}.zyFlowchartSDK div.program-function div.variables-and-IO-container div.function-variables-container{border-left:1px solid transparent;margin-bottom:30px}.zyFlowchartSDK div.program-function div.variables-and-IO-container div.input-output-container{border-left:1px solid #ccc;border-top:1px solid #ccc;padding-top:15px}.zyFlowchartSDK div.variable-or-IO-label{margin-bottom:2px;text-align:left}.zyFlowchartSDK div.variable-or-IO-label em{font-size:12px}.zyFlowchartSDK div.numerical-input{-moz-appearance:textfield-multiline;-webkit-appearance:textarea;-webkit-box-shadow:inset 1px 1px 1px 0 #ccc;-moz-box-shadow:inset 1px 1px 1px 0 #ccc;background-color:#fff;border:1px solid #ccc;box-shadow:inset 1px 1px 1px 0 #ccc;height:50px;overflow-y:scroll;padding:2px;width:inherit}.zyFlowchartSDK div.numerical-input[contenteditable=false]{background-color:#efefef;color:#8424ac}.zyFlowchartSDK div.numerical-input[contenteditable=false] span.consumed{color:#999}.zyFlowchartSDK div.numerical-input:focus{border-color:#5780a6;box-shadow:inset 0 1px 2px rgba(0,0,0,.075),0 0 5px rgba(87,128,166,.5);outline:0}.zyFlowchartSDK pre.numerical-output{color:#1ec81e}.zyFlowchartSDK div.output-container div.textarea-console-container{display:flex}.zyFlowchartSDK div.output-container div.console{box-sizing:border-box;display:block;max-height:100px;min-height:50px;overflow-y:scroll;width:100%}.zyFlowchartSDK div.output-container div.console::-webkit-scrollbar{background:transparent;width:8px}.zyFlowchartSDK div.output-container div.console::-webkit-scrollbar-thumb{background:#bdbdbd}.zyFlowchartSDK div.segmented-function-control:not(:empty){margin-bottom:8px}.zyFlowchartSDK div.segmented-language-control ul{margin-bottom:0;padding:0}.zyFlowchartSDK div.flowchart-program-container{align-items:flex-start;display:flex;flex-direction:column}.zyFlowchartSDK div.flowchart-program-container div.flowchart-program.use-border{border:1px solid #888;padding:6px}@keyframes error-message-fade-in{from{opacity:0}to{opacity:1}}.zyFlowchartSDK div.flowchart-program-container div.error-message{animation:error-message-fade-in .5s;background:#fff2f2;border:1px solid #bb0404;border-radius:3px;color:#bb0404;overflow-wrap:break-word;padding:3px;white-space:pre-wrap}</style>'}return H(a,[{key:"init",value:function(a){$("#"+a).html(this.css),m(a),n(a)}},{key:"makeExecutor",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return new Da(a,b,c,d)}},{key:"makeExecutorController",value:function(a,b){return new K(a,b)}}]),a}();E.exports={create:function(){return this.zyFlowchartSDK||(this.zyFlowchartSDK=new rc),this.zyFlowchartSDK},dependencies:{tools:["utilities","segmentedControl","restrictedEditor"],vendorJS:["raphael.min.js","alea.min.js"]},runTests:function(){}},a.default=E.exports});